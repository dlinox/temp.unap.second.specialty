import{$ as Ie,ai as Ae,B as ne,a0 as we,aj as Te,ak as be,al as Ee,am as Fe,an as he,ao as Pe,ap as Be,aq as ge,ar as $e,as as ze,E as oe,I as ye,J as Y,at as Le,au as De,av as Ce,aw as Re,ax as Me,ay as Oe,az as Ge,aA as Ue,L as _e,aB as P,G as je,b as a,aC as Ye,q,U as se,h as g,R as ee,d as Ne,s as qe,r as s,o as z,m as ae,w as t,c as X,e as J,i as r,n as W,z as U,F as Z,p as ie,x as j,S as te,t as T,ab as He,aa as N,a as K,f as re,C as Xe,aD as Je,P as Ve,X as We,aE as Ke,aF as Qe,aG as Ze,aH as ea,aI as aa,aJ as ta}from"./index-B7kCtcGl.js";import{V as L,a as le,b as D,e as ue,c as de}from"./VCard-D7nfxHvf.js";import{d as Q,V as la,a as ce,i as na,j as ve}from"./VSelect-DPHmT9sv.js";import{V as me}from"./VForm-DJLJvXUm.js";import{V as fe}from"./VTextField-DqB-JfF8.js";const oa="https://data.segundas.unap.edu.pe/api",R=Ie.create({baseURL:oa,headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}),Sa=async e=>(await R.get("postulants/generals/"+e)).data,sa=async e=>(await R.get("postulants/evaluation/"+e)).data,ia=async e=>(await R.post("postulants/evaluation",e)).data,pe=async e=>(await R.post("postulants/evaluation-detail",e)).data,ra=async e=>(await R.post("postulants/experience/minus",e)).data,ua=async e=>(await R.post("postulants/experience/add",e)).data,da=async e=>(await R.delete("postulants/evaluation/"+e)).data,ca=Ae("v-alert-title"),va=["success","info","warning","error"],ma=ne({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:we,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>va.includes(e)},...Te(),...be(),...Ee(),...Fe(),...he(),...Pe(),...Be(),...ge(),...$e(),...ze({variant:"flat"})},"VAlert"),fa=oe()({name:"VAlert",props:ma(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,i){let{emit:u,slots:n}=i;const C=ye(e,"modelValue"),y=Y(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),c=Y(()=>({color:e.color??e.type,variant:e.variant})),{themeClasses:_}=Le(e),{colorClasses:f,colorStyles:p,variantClasses:B}=De(c),{densityClasses:k}=Ce(e),{dimensionStyles:v}=Re(e),{elevationClasses:h}=Me(e),{locationStyles:I}=Oe(e),{positionClasses:E}=Ge(e),{roundedClasses:F}=Ue(e),{textColorClasses:$,textColorStyles:d}=_e(P(e,"borderColor")),{t:A}=je(),S=Y(()=>({"aria-label":A(e.closeLabel),onClick(m){C.value=!1,u("click:close",m)}}));return()=>{const m=!!(n.prepend||y.value),M=!!(n.title||e.title),w=!!(n.close||e.closable);return C.value&&a(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},_.value,f.value,k.value,h.value,E.value,F.value,B.value,e.class],style:[p.value,v.value,I.value,e.style],role:"alert"},{default:()=>{var O,G;return[Ye(!1,"v-alert"),e.border&&a("div",{key:"border",class:["v-alert__border",$.value],style:d.value},null),m&&a("div",{key:"prepend",class:"v-alert__prepend"},[n.prepend?a(se,{key:"prepend-defaults",disabled:!y.value,defaults:{VIcon:{density:e.density,icon:y.value,size:e.prominent?44:28}}},n.prepend):a(q,{key:"prepend-icon",density:e.density,icon:y.value,size:e.prominent?44:28},null)]),a("div",{class:"v-alert__content"},[M&&a(ca,{key:"title"},{default:()=>{var b;return[((b=n.title)==null?void 0:b.call(n))??e.title]}}),((O=n.text)==null?void 0:O.call(n))??e.text,(G=n.default)==null?void 0:G.call(n)]),n.append&&a("div",{key:"append",class:"v-alert__append"},[n.append()]),w&&a("div",{key:"close",class:"v-alert__close"},[n.close?a(se,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var b;return[(b=n.close)==null?void 0:b.call(n,{props:S.value})]}}):a(g,ee({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},S.value),null)])]}})}}}),Ia=Ne({__name:"TabCv",setup(e){const i=qe(),u=s({indicator:null,description:"",criteria:1,evaluationId:null}),n=s({indicator:{id:3,name:"Certificación",score:1},description:"Años de Experiencia",criteria:2,evaluationId:null}),C=s({indicator:{id:4,name:"Certificación",score:.25},description:"",criteria:3,evaluationId:null}),y=s(null),c=s(0),_=s(null),f=s(0),p=s(null),B=s(0),k=s(0),v=s(!1),h=s(!1),I=s(!1),E=s(!1),F=s(!1),$=s(!1),d=s(null),A=s([{id:1,name:"Título profesional",score:8},{id:2,name:"Maestría",score:2}]),S=s([{id:1,name:"Formación académica",description:"Formación académica",maxScore:20},{id:2,name:"Experiencia laboral",description:"Experiencia laboral",maxScore:20},{id:3,name:"Capacitaciones",description:"Formación profesional",maxScore:20}]),m=async()=>{let V=await sa(i.params.id);d.value=V||null;let o=V.details;y.value=o.filter(l=>l.EvaluationIndicatorId===1||l.EvaluationIndicatorId===2),_.value=o.filter(l=>l.EvaluationIndicatorId===3),p.value=o.filter(l=>l.EvaluationIndicatorId===4),c.value=y.value.reduce((l,x)=>l+parseFloat(x.Score)*parseFloat(x.Amount),0),f.value=_.value.reduce((l,x)=>l+parseFloat(x.Score)*parseFloat(x.Amount),0),B.value=p.value.reduce((l,x)=>l+parseFloat(x.Score)*parseFloat(x.Amount),0),c.value=c.value>10?10:c.value,k.value=c.value+f.value+B.value},M=async()=>{let V={postulantId:i.params.id,callId:1},o=await ia(V);d.value=o?o.evaluacion:null},w=async()=>{try{h.value=!0,u.value.evaluationId=d.value.Id,await pe(u.value),await m(),h.value=!1,u.value.indicator=null,u.value.description="",v.value=!1}catch{alert("Ocurrio un error")}},O=async()=>{try{E.value=!0,C.value.evaluationId=d.value.Id,await pe(C.value),I.value=!1,E.value=!1,C.value.description="",await m()}catch{alert("Ocurrio un error")}},G=async()=>{$.value=!0,n.value.evaluationId=d.value.Id,await ua(n.value),await m(),$.value=!1},b=async()=>{F.value=!0,n.value.evaluationId=d.value.Id,await ra(n.value),await m(),F.value=!1},H=async(V,o,l)=>{l==="FA"?y.value[o].loading=!0:p.value[o].loading=!0,await da(V),await m()};return(async()=>{await m()})(),(V,o)=>(z(),ae(Z,null,[a(J,{fluid:""},{default:t(()=>[d.value===null?(z(),X(L,{key:0,class:"text-center mx-auto my-5",width:"300"},{default:t(()=>[a(J,null,{default:t(()=>[a(fa,{type:"info",variant:"text",class:"mb-5"},{default:t(()=>[r(" Aún no se ha iniciado la evaluación ")]),_:1}),a(g,{block:"",onClick:M},{default:t(()=>[r(" Iniciar Evaluación ")]),_:1})]),_:1})]),_:1})):(z(),X(le,{key:1},{default:t(()=>[a(D,{cols:"12"},{default:t(()=>[a(L,{rounded:"0",elevation:"0"},{default:t(()=>[a(W,{density:"compact",title:S.value[0].name},{default:t(()=>[a(U),a(g,{"append-icon":"mdi-plus",onClick:o[0]||(o[0]=l=>v.value=!0),variant:"outlined",rounded:"lg",class:"me-4"},{default:t(()=>[r(" Agregar ")]),_:1})]),_:1},8,["title"]),(z(!0),ae(Z,null,ie(y.value,(l,x)=>(z(),X(j,{key:l.Id,class:"border-b py-2"},{prepend:t(()=>[a(te,null,{default:t(()=>[r(T((parseInt(l.Score)*parseInt(l.Amount)).toFixed(2)),1)]),_:2},1024)]),append:t(()=>[a(g,{icon:"",rounded:"lg",variant:"tonal",color:"red",onClick:Se=>H(l.Id,x,"FA"),loading:l.loading},{default:t(()=>[a(q,null,{default:t(()=>[r("mdi-delete")]),_:1})]),_:2},1032,["onClick","loading"])]),default:t(()=>[a(He,null,{default:t(()=>[r(T(l.EvaluationIndicatorId===1?"Título profesional":"Maestría"),1)]),_:2},1024),a(N,null,{default:t(()=>[r(T(l.Observations),1)]),_:2},1024)]),_:2},1024))),128)),a(j,{class:"border-b py-2"},{default:t(()=>[a(N,{class:"text-end"},{default:t(()=>[a(Q,{class:"mr-4",label:"",size:"large",color:"primary"},{default:t(()=>[K("strong",null,T(c.value)+" puntos ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(D,{cols:"12"},{default:t(()=>[a(L,{rounded:"0",elevation:"0"},{default:t(()=>[a(W,{density:"compact",title:S.value[1].name},{default:t(()=>[a(U)]),_:1},8,["title"]),a(j,{class:"py-2 border-b",title:"Año(s) de experiencia"},{prepend:t(()=>[a(te,null,{default:t(()=>[r(T(_.value.length===0?0 .toFixed(2):(parseInt(_.value[0].Score)*parseInt(_.value[0].Amount)).toFixed(2)),1)]),_:1})]),append:t(()=>[a(g,{icon:"",rounded:"lg",variant:"tonal",color:"red",loading:F.value,onClick:b},{default:t(()=>[a(q,null,{default:t(()=>[r("mdi-minus")]),_:1})]),_:1},8,["loading"]),a(g,{icon:"",rounded:"lg",variant:"tonal",color:"blue",loading:$.value,onClick:G},{default:t(()=>[a(q,null,{default:t(()=>[r("mdi-plus")]),_:1})]),_:1},8,["loading"])]),_:1}),a(j,{class:"border-b py-2"},{default:t(()=>[a(N,{class:"text-end"},{default:t(()=>[a(Q,{class:"mr-4",label:"",size:"large",color:"primary"},{default:t(()=>[K("strong",null,T(f.value)+" puntos ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(D,{cols:"12"},{default:t(()=>[a(L,{rounded:"0",elevation:"0"},{default:t(()=>[a(W,{density:"compact",title:S.value[2].name},{default:t(()=>[a(U),a(g,{"append-icon":"mdi-plus",onClick:o[1]||(o[1]=l=>I.value=!0),variant:"outlined",rounded:"lg",class:"me-4"},{default:t(()=>[r(" Agregar ")]),_:1})]),_:1},8,["title"]),(z(!0),ae(Z,null,ie(p.value,(l,x)=>(z(),X(j,{key:l.Id,class:"border-b py-2"},{prepend:t(()=>[a(te,null,{default:t(()=>[r(T((parseFloat(l.Score)*parseFloat(l.Amount)).toFixed(2)),1)]),_:2},1024)]),append:t(()=>[a(g,{icon:"",rounded:"lg",variant:"tonal",color:"red",onClick:Se=>H(l.Id,x,"C"),loading:l.loading},{default:t(()=>[a(q,null,{default:t(()=>[r("mdi-delete")]),_:1})]),_:2},1032,["onClick","loading"])]),default:t(()=>[a(N,null,{default:t(()=>[r(T(l.Observations),1)]),_:2},1024)]),_:2},1024))),128)),a(j,{class:"border-b py-2"},{default:t(()=>[a(N,{class:"text-end"},{default:t(()=>[a(Q,{class:"mr-4",label:"",size:"large",color:"primary"},{default:t(()=>[K("strong",null,T(B.value)+" puntos ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(D,{cols:"12"},{default:t(()=>[a(L,{rounded:"0",elevation:"0"},{default:t(()=>[a(W,{title:"Calificación Final"},{default:t(()=>[a(U),a(Q,{class:"mr-4",label:"",size:"x-large",color:"blue"},{default:t(()=>[K("strong",null,T(k.value)+" puntos ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),a(ce,{modelValue:v.value,"onUpdate:modelValue":o[5]||(o[5]=l=>v.value=l),"max-width":"600"},{default:t(()=>[a(me,{ref:"formAddFA","lazy-validation":"",onSubmit:re(w,["prevent"])},{default:t(()=>[a(L,null,{default:t(()=>[a(ue,null,{default:t(()=>[r(" Agregar Formación Académica ")]),_:1}),a(J,null,{default:t(()=>[a(le,null,{default:t(()=>[a(D,{cols:"12"},{default:t(()=>[a(la,{modelValue:u.value.indicator,"onUpdate:modelValue":o[2]||(o[2]=l=>u.value.indicator=l),label:"Indicador",items:A.value,"item-title":"name","item-value":"id","return-object":!0},null,8,["modelValue","items"])]),_:1}),a(D,{cols:"12"},{default:t(()=>[a(fe,{modelValue:u.value.description,"onUpdate:modelValue":o[3]||(o[3]=l=>u.value.description=l),label:"Descripción"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(de,null,{default:t(()=>[a(U),a(g,{variant:"tonal",color:"error",onClick:o[4]||(o[4]=l=>v.value=!1)},{default:t(()=>[r("Cancelar")]),_:1}),a(g,{color:"primary",variant:"flat",type:"submit",loading:h.value},{default:t(()=>[r("Guardar")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1},8,["modelValue"]),a(ce,{modelValue:I.value,"onUpdate:modelValue":o[8]||(o[8]=l=>I.value=l),"max-width":"600"},{default:t(()=>[a(me,{ref:"FormC",onSubmit:re(O,["prevent"])},{default:t(()=>[a(L,null,{default:t(()=>[a(ue,null,{default:t(()=>[r(" Agregar Capacitación ")]),_:1}),a(J,null,{default:t(()=>[a(le,null,{default:t(()=>[a(D,{cols:"12"},{default:t(()=>[a(fe,{modelValue:C.value.description,"onUpdate:modelValue":o[6]||(o[6]=l=>C.value.description=l),label:"Descripción"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(de,null,{default:t(()=>[a(U),a(g,{color:"error",variant:"tonal",onClick:o[7]||(o[7]=l=>I.value=!1)},{default:t(()=>[r("Cancelar")]),_:1}),a(g,{color:"primary",type:"submit",variant:"flat",loading:E.value},{default:t(()=>[r("Guardar")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1},8,["modelValue"])],64))}}),xe=Symbol.for("vuetify:v-tabs"),pa=ne({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Xe(Je({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),ba=oe()({name:"VTab",props:pa(),setup(e,i){let{slots:u,attrs:n}=i;const{textColorClasses:C,textColorStyles:y}=_e(e,"sliderColor"),c=s(),_=s(),f=Y(()=>e.direction==="horizontal"),p=Y(()=>{var k,v;return((v=(k=c.value)==null?void 0:k.group)==null?void 0:v.isSelected.value)??!1});function B(k){var h,I;let{value:v}=k;if(v){const E=(I=(h=c.value)==null?void 0:h.$el.parentElement)==null?void 0:I.querySelector(".v-tab--selected .v-tab__slider"),F=_.value;if(!E||!F)return;const $=getComputedStyle(E).color,d=E.getBoundingClientRect(),A=F.getBoundingClientRect(),S=f.value?"x":"y",m=f.value?"X":"Y",M=f.value?"right":"bottom",w=f.value?"width":"height",O=d[S],G=A[S],b=O>G?d[M]-A[M]:d[S]-A[S],H=Math.sign(b)>0?f.value?"right":"bottom":Math.sign(b)<0?f.value?"left":"top":"center",V=(Math.abs(b)+(Math.sign(b)<0?d[w]:A[w]))/Math.max(d[w],A[w])||0,o=d[w]/A[w]||0,l=1.5;Ke(F,{backgroundColor:[$,"currentcolor"],transform:[`translate${m}(${b}px) scale${m}(${o})`,`translate${m}(${b/l}px) scale${m}(${(V-1)/l+1})`,"none"],transformOrigin:Array(3).fill(H)},{duration:225,easing:Qe})}}return Ve(()=>{const k=g.filterProps(e);return a(g,ee({symbol:xe,ref:c,class:["v-tab",e.class],style:e.style,tabindex:p.value?0:-1,role:"tab","aria-selected":String(p.value),active:!1},k,n,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":B}),{...u,default:()=>{var v;return a(Z,null,[((v=u.default)==null?void 0:v.call(u))??e.text,!e.hideSlider&&a("div",{ref:_,class:["v-tab__slider",C.value],style:y.value},null)])}})}),We({},c)}});function ga(e){return e?e.map(i=>ta(i)?i:{text:i,value:i}):[]}const ya=ne({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...na({mandatory:"force"}),...be(),...ge()},"VTabs"),Aa=oe()({name:"VTabs",props:ya(),emits:{"update:modelValue":e=>!0},setup(e,i){let{slots:u}=i;const n=ye(e,"modelValue"),C=Y(()=>ga(e.items)),{densityClasses:y}=Ce(e),{backgroundColorClasses:c,backgroundColorStyles:_}=Ze(P(e,"bgColor"));return ea({VTab:{color:P(e,"color"),direction:P(e,"direction"),stacked:P(e,"stacked"),fixed:P(e,"fixedTabs"),sliderColor:P(e,"sliderColor"),hideSlider:P(e,"hideSlider")}}),Ve(()=>{const f=ve.filterProps(e);return a(ve,ee(f,{modelValue:n.value,"onUpdate:modelValue":p=>n.value=p,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},y.value,c.value,e.class],style:[{"--v-tabs-height":aa(e.height)},_.value,e.style],role:"tablist",symbol:xe}),{default:()=>[u.default?u.default():C.value.map(p=>a(ba,ee(p,{key:p.text}),null))]})}),{}}});export{Aa as V,Ia as _,ba as a,Sa as g};
