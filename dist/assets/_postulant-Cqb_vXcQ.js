var He=Object.defineProperty;var Je=(l,u,m)=>u in l?He(l,u,{enumerable:!0,configurable:!0,writable:!0,value:m}):l[u]=m;var de=(l,u,m)=>(Je(l,typeof u!="symbol"?u+"":u,m),m);import{d as Y,s as w,r as g,o as D,j as L,a as e,w as n,u as N,F as O,k as se,c as G,p as ve,e as le,q as H,v as je,x as Ke,y as Ge,z as qe,A as Qe,B as W,C as ge,D as Xe,E as We,G as ue,H as Z,I as Ae,J as Ze,K as el,L as ll,M as K,N as al,O as ce,P as tl,Q as ee,R as nl,S as ol,g as F,T as ul,U as sl,W as il,X as rl,n as dl,f as fe,Y as ml,t as me,Z as Ce,V as cl,_ as fl,i as vl,$ as pl,a0 as Vl,b as bl,m as hl,h as yl}from"./index-DDLU_BfH.js";import{i as M,c as Se,e as gl,V as Al}from"./VForm-BIfXvgck.js";import{a as pe,V as q,m as Cl,u as Sl,c as Dl,d as Il,e as _l}from"./VSelect-CG5f4lCu.js";import{b as h,a as Q,c as E,V as X,e as De,m as Nl,u as Pl,d as Tl}from"./VTextField-DjtPOVnh.js";import{m as El,u as Rl}from"./filter-COrP14nU.js";import{_ as wl,P as Ul,F as Ol}from"./FileService-CzE8YqwE.js";class kl{constructor(){de(this,"http");const u="https://api.unap.edu.pe";this.http=pe.create({baseURL:u,headers:{"Content-Type":"application/json"}})}async _DocumentTypes(){let u=await this.http.get("/TYPE_DOCUMENTS/v1/sunedu/");return console.log("document types",u.data),u.data}async _Provinces(u){return(await this.http.get(`/PLACES/v1/provinces/${u}/`)).data.data}async _Districts(u){return(await this.http.get(`/PLACES/v1/districts/${u}/`)).data.data}}const xl=[{id:"01",name:"AMAZONAS"},{id:"02",name:"ANCASH"},{id:"03",name:"APURIMAC"},{id:"04",name:"AREQUIPA"},{id:"05",name:"AYACUCHO"},{id:"06",name:"CAJAMARCA"},{id:"07",name:"CUSCO"},{id:"08",name:"HUANCAVELICA"},{id:"09",name:"HUANUCO"},{id:"10",name:"ICA"},{id:"11",name:"JUNIN"},{id:"12",name:"LA LIBERTAD"},{id:"13",name:"LAMBAYEQUE"},{id:"14",name:"LIMA"},{id:"15",name:"LORETO"},{id:"16",name:"MADRE DE DIOS"},{id:"17",name:"MOQUEGUA"},{id:"18",name:"PASCO"},{id:"19",name:"PIURA"},{id:"20",name:"PUNO"},{id:"21",name:"SAN MARTIN"},{id:"22",name:"TACNA"},{id:"23",name:"TUMBES"},{id:"24",name:"CALLAO"},{id:"25",name:"UCAYALI"}],Ie=Y({__name:"UbigeoForm",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(l,{emit:u}){const m=u,i=l,V=w({get:()=>i.modelValue,set:f=>{m("update:modelValue",f)}}),y=new kl,t=xl,o=g([]),s=g([]),R=g(""),c=g(null),P=async f=>{o.value=[],s.value=[],c.value="",V.value="",o.value=await y._Provinces(f)},v=async f=>{V.value="",s.value=await y._Districts(f)};return(f,A)=>(D(),L(O,null,[e(h,{cols:"12",md:"4"},{default:n(()=>[e(q,{items:N(t),modelValue:R.value,"onUpdate:modelValue":[A[0]||(A[0]=T=>R.value=T),P],label:"Departamento",itemTitle:"name",itemValue:"id",clearable:!1},null,8,["items","modelValue"])]),_:1}),e(h,{cols:"12",md:"4"},{default:n(()=>[e(q,{items:o.value,modelValue:c.value,"onUpdate:modelValue":[A[1]||(A[1]=T=>c.value=T),v],label:"Provincia",itemTitle:"name",itemValue:"id",clearable:!1},null,8,["items","modelValue"])]),_:1}),e(h,{cols:"12",md:"4"},{default:n(()=>[e(q,{modelValue:V.value,"onUpdate:modelValue":A[2]||(A[2]=T=>V.value=T),items:s.value,label:"Distrito",itemTitle:"name",itemValue:"id",clearable:!1},null,8,["modelValue","items"])]),_:1})],64))}}),Ml=[{id:"000",name:"SIN DOCUMENTO TRIBUTARIO | NO DOMINIO | SIN REGISTRO ÚNICO DE CONTRIBUYENTES",shortName:"SIN DOCUMENTO TRIBUTARIO"},{id:"001",name:"DOCUMENTO NACIONAL DE IDENTIDAD",shortName:"DNI"},{id:"004",name:"CARNET/CARNÉ DE EXTRANJERÍA",shortName:"CE"},{id:"007",name:"PASAPORTE",shortName:"PASAPORTE"},{id:"00A",name:"CÉDULA DIPLOMÁTICA DE IDENTIDAD",shortName:"CÉDULA DIPLOMÁTICA"},{id:"00F",name:"PERMISO TEMPORAL DE PERMANENCIA PTP",shortName:"PTP"},{id:"201",name:"DOCUMENTO EXTRANJERO - OTROS",shortName:"DOCUMENTO EXTRANJERO"},{id:"202",name:"CARNÉ DE IDENTIDAD",shortName:"CARNÉ DE IDENTIDAD"}],Fl=H("small",{class:"text-body-2"},"Lugar de nacimiento",-1),Ll=H("small",{class:"text-body-2"},"Lugar de residencia",-1),Bl=Y({__name:"PostulantPersonal",props:{postulant:{},form:{}},emits:["onSuccess"],setup(l,{emit:u}){const m=Ml,i=[{text:"Masculino",value:"1"},{text:"Femenino",value:"2"}],V=[{text:"Soltero",value:"1"},{text:"Casado",value:"2"},{text:"Divorciado",value:"3"},{text:"Viudo",value:"4"}];return(async()=>{})(),(t,o)=>(D(),L(O,null,[e(se,{flat:"",density:"compact",title:"Información personal"}),e(le,null,{default:n(()=>[e(Q,null,{default:n(()=>[e(h,{cols:"12",md:"6"},{default:n(()=>{var s;return[e(q,{items:N(m),modelValue:(s=t.postulant)==null?void 0:s.DocumentType,label:"Tipo de documento",itemTitle:"shortName",itemValue:"id",clearable:!1,readonly:""},null,8,["items","modelValue"])]}),_:1}),e(h,{cols:"12",md:"6"},{default:n(()=>{var s;return[e(E,{label:"Número de documento",modelValue:(s=t.postulant)==null?void 0:s.DocumentNumber,readonly:"",clearable:!1},null,8,["modelValue"])]}),_:1}),e(h,{cols:"12",md:"12"},{default:n(()=>[e(E,{label:"Nombres",modelValue:t.form.name,"onUpdate:modelValue":o[0]||(o[0]=s=>t.form.name=s),rules:[N(M)]},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"12",md:"6"},{default:n(()=>[e(E,{label:"Apellido paterno",modelValue:t.form.fatherSurname,"onUpdate:modelValue":o[1]||(o[1]=s=>t.form.fatherSurname=s),rules:[N(M)]},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"12",md:"6"},{default:n(()=>[e(E,{label:"Apellido materno",modelValue:t.form.motherSurname,"onUpdate:modelValue":o[2]||(o[2]=s=>t.form.motherSurname=s)},null,8,["modelValue"])]),_:1}),e(h,{cols:"12",md:"4"},{default:n(()=>[e(E,{label:"Fecha de nacimiento",modelValue:t.form.birthDate,"onUpdate:modelValue":o[3]||(o[3]=s=>t.form.birthDate=s),type:"date",rules:[N(M)]},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"6",md:"4"},{default:n(()=>[e(q,{modelValue:t.form.gender,"onUpdate:modelValue":o[4]||(o[4]=s=>t.form.gender=s),items:i,label:"Género",itemTitle:"text",itemValue:"value",clearable:!1,rules:[N(M)]},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"6",md:"4"},{default:n(()=>[e(q,{modelValue:t.form.maritalStatus,"onUpdate:modelValue":o[5]||(o[5]=s=>t.form.maritalStatus=s),items:V,label:"Estado civil",itemTitle:"text",itemValue:"value",clearable:!1,rules:[N(M)]},null,8,["modelValue","rules"])]),_:1}),t.form.gender==="2"&&(t.form.maritalStatus==="2"||t.form.maritalStatus==="3"||t.form.maritalStatus==="4")?(D(),G(h,{key:0,cols:"12",md:"6"},{default:n(()=>[e(E,{label:"Apellido de casada",modelValue:t.form.marriedSurname,"onUpdate:modelValue":o[6]||(o[6]=s=>t.form.marriedSurname=s)},null,8,["modelValue"])]),_:1})):ve("",!0),e(h,{cols:"12 pt-0"},{default:n(()=>[e(X,{class:"pb-1",flat:""},{default:n(()=>[e(De,{class:"pt-0"},{default:n(()=>[Fl]),_:1}),e(Q,null,{default:n(()=>[e(Ie,{modelValue:t.form.birthPlace,"onUpdate:modelValue":o[7]||(o[7]=s=>t.form.birthPlace=s)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,{cols:"12 pt-0"},{default:n(()=>[e(X,{class:"pb-1",flat:""},{default:n(()=>[e(De,{class:"pt-0"},{default:n(()=>[Ll]),_:1}),e(Q,null,{default:n(()=>[e(Ie,{modelValue:t.form.residencePlace,"onUpdate:modelValue":o[8]||(o[8]=s=>t.form.residencePlace=s)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,{cols:"12",md:"6"},{default:n(()=>[e(E,{label:"Teléfono",modelValue:t.form.phoneNumber,"onUpdate:modelValue":o[9]||(o[9]=s=>t.form.phoneNumber=s),rules:[N(M),N(Se)]},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"12",md:"6"},{default:n(()=>[e(E,{label:"coreo electrónico",modelValue:t.form.email,"onUpdate:modelValue":o[10]||(o[10]=s=>t.form.email=s),rules:[N(M),N(gl)]},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"12",md:"12"},{default:n(()=>[e(E,{label:"Dirección",modelValue:t.form.address,"onUpdate:modelValue":o[11]||(o[11]=s=>t.form.address=s),rules:[N(M)]},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"12",md:"4"},{default:n(()=>[e(E,{label:"Año de graduación",modelValue:t.form.graduationYear,"onUpdate:modelValue":o[12]||(o[12]=s=>t.form.graduationYear=s),rules:[N(M),N(Se)],maxLength:"4"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})],64))}});function $l(l,u,m){if(u==null)return l;if(Array.isArray(u))throw new Error("Multiple matches is not implemented");return typeof u=="number"&&~u?e(O,null,[e("span",{class:"v-combobox__unmask"},[l.substr(0,u)]),e("span",{class:"v-combobox__mask"},[l.substr(u,m)]),e("span",{class:"v-combobox__unmask"},[l.substr(u+m)])]):l}const zl=je({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...El({filterKeys:["title"]}),...Cl({hideNoData:!0,returnObject:!0}),...Ke(Nl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ge({transition:!1})},"VCombobox"),Yl=qe()({name:"VCombobox",props:zl(),emits:{"update:focused":l=>!0,"update:modelValue":l=>!0,"update:search":l=>!0,"update:menu":l=>!0},setup(l,u){var be;let{emit:m,slots:i}=u;const{t:V}=Qe(),y=g(),t=W(!1),o=W(!0),s=W(!1),R=g(),c=g(),P=ge(l,"menu"),v=w({get:()=>P.value,set:a=>{var d;P.value&&!a&&((d=R.value)!=null&&d.ΨopenChildren)||(P.value=a)}}),f=W(-1);let A=!1;const T=w(()=>{var a;return(a=y.value)==null?void 0:a.color}),Ve=w(()=>v.value?l.closeText:l.openText),{items:_e,transformIn:Ne,transformOut:Pe}=Xe(l),{textColorClasses:Te,textColorStyles:Ee}=We(T),p=ge(l,"modelValue",[],a=>Ne(il(a)),a=>{const d=Pe(a);return l.multiple?d:d[0]??null}),J=Pl(),j=W(l.multiple?"":((be=p.value[0])==null?void 0:be.title)??""),C=w({get:()=>j.value,set:a=>{var d;if(j.value=a??"",l.multiple||(p.value=[ue(l,a)]),a&&l.multiple&&((d=l.delimiters)!=null&&d.length)){const b=a.split(new RegExp(`(?:${l.delimiters.join("|")})+`));b.length>1&&(b.forEach(I=>{I=I.trim(),I&&k(ue(l,I))}),j.value="")}a||(f.value=-1),o.value=!a}}),Re=w(()=>typeof l.counterValue=="function"?l.counterValue(p.value):typeof l.counterValue=="number"?l.counterValue:l.multiple?p.value.length:C.value.length);Z(j,a=>{A?Ae(()=>A=!1):t.value&&!v.value&&(v.value=!0),m("update:search",a)}),Z(p,a=>{var d;l.multiple||(j.value=((d=a[0])==null?void 0:d.title)??"")});const{filteredItems:ae,getMatches:we}=Rl(l,_e,()=>o.value?"":C.value),U=w(()=>l.hideSelected?ae.value.filter(a=>!p.value.some(d=>d.value===a.value)):ae.value),Ue=w(()=>p.value.map(a=>a.value)),te=w(()=>{var d;return(l.autoSelectFirst===!0||l.autoSelectFirst==="exact"&&C.value===((d=U.value[0])==null?void 0:d.title))&&U.value.length>0&&!o.value&&!s.value}),ie=w(()=>l.hideNoData&&!U.value.length||l.readonly||(J==null?void 0:J.isReadonly.value)),re=g(),{onListScroll:Oe,onListKeydown:ke}=Sl(re,y);function xe(a){A=!0,l.openOnClear&&(v.value=!0)}function Me(){ie.value||(v.value=!0)}function Fe(a){ie.value||(t.value&&(a.preventDefault(),a.stopPropagation()),v.value=!v.value)}function Le(a){var I;if(rl(a)||l.readonly||J!=null&&J.isReadonly.value)return;const d=y.value.selectionStart,b=p.value.length;if((f.value>-1||["Enter","ArrowDown","ArrowUp"].includes(a.key))&&a.preventDefault(),["Enter","ArrowDown"].includes(a.key)&&(v.value=!0),["Escape"].includes(a.key)&&(v.value=!1),["Enter","Escape","Tab"].includes(a.key)&&(te.value&&["Enter","Tab"].includes(a.key)&&k(ae.value[0]),o.value=!0),a.key==="ArrowDown"&&te.value&&((I=re.value)==null||I.focus("next")),!!l.multiple){if(["Backspace","Delete"].includes(a.key)){if(f.value<0){a.key==="Backspace"&&!C.value&&(f.value=b-1);return}const r=f.value,S=p.value[f.value];S&&!S.props.disabled&&k(S,!1),f.value=r>=b-1?b-2:r}if(a.key==="ArrowLeft"){if(f.value<0&&d>0)return;const r=f.value>-1?f.value-1:b-1;p.value[r]?f.value=r:(f.value=-1,y.value.setSelectionRange(C.value.length,C.value.length))}if(a.key==="ArrowRight"){if(f.value<0)return;const r=f.value+1;p.value[r]?f.value=r:(f.value=-1,y.value.setSelectionRange(0,0))}a.key==="Enter"&&C.value&&(k(ue(l,C.value)),C.value="")}}function Be(){var a;t.value&&(o.value=!0,(a=y.value)==null||a.focus())}function k(a){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(l.multiple){const b=p.value.findIndex(r=>l.valueComparator(r.value,a.value)),I=d??!~b;if(~b){const r=I?[...p.value,a]:[...p.value];r.splice(b,1),p.value=r}else I&&(p.value=[...p.value,a]);l.clearOnSelect&&(C.value="")}else{const b=d!==!1;p.value=b?[a]:[],j.value=b?a.title:"",Ae(()=>{v.value=!1,o.value=!0})}}function $e(a){t.value=!0,setTimeout(()=>{s.value=!0})}function ze(a){s.value=!1}function Ye(a){(a==null||a===""&&!l.multiple)&&(p.value=[])}return Z(t,(a,d)=>{a||a===d||(f.value=-1,v.value=!1,te.value&&!s.value&&!p.value.some(b=>{let{value:I}=b;return I===U.value[0].value})?k(U.value[0]):l.multiple&&C.value&&k(ue(l,C.value)))}),Z(v,()=>{if(!l.hideSelected&&v.value&&p.value.length){const a=U.value.findIndex(d=>p.value.some(b=>l.valueComparator(b.value,d.value)));Ze&&window.requestAnimationFrame(()=>{var d;a>=0&&((d=c.value)==null||d.scrollToIndex(a))})}}),Z(U,(a,d)=>{t.value&&(!a.length&&l.hideNoData&&(v.value=!1),!d.length&&a.length&&(v.value=!0))}),el(()=>{const a=!!(l.chips||i.chip),d=!!(!l.hideNoData||U.value.length||i["prepend-item"]||i["append-item"]||i["no-data"]),b=p.value.length>0,I=E.filterProps(l);return e(E,K({ref:y},I,{modelValue:C.value,"onUpdate:modelValue":[r=>C.value=r,Ye],focused:t.value,"onUpdate:focused":r=>t.value=r,validationValue:p.externalValue,counterValue:Re.value,dirty:b,class:["v-combobox",{"v-combobox--active-menu":v.value,"v-combobox--chips":!!l.chips,"v-combobox--selection-slot":!!i.selection,"v-combobox--selecting-index":f.value>-1,[`v-combobox--${l.multiple?"multiple":"single"}`]:!0},l.class],style:l.style,readonly:l.readonly,placeholder:b?void 0:l.placeholder,"onClick:clear":xe,"onMousedown:control":Me,onKeydown:Le}),{...i,default:()=>e(O,null,[e(ll,K({ref:R,modelValue:v.value,"onUpdate:modelValue":r=>v.value=r,activator:"parent",contentClass:"v-combobox__content",disabled:ie.value,eager:l.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:l.transition,onAfterLeave:Be},l.menuProps),{default:()=>[d&&e(al,K({ref:re,selected:Ue.value,selectStrategy:l.multiple?"independent":"single-independent",onMousedown:r=>r.preventDefault(),onKeydown:ke,onFocusin:$e,onFocusout:ze,onScrollPassive:Oe,tabindex:"-1","aria-live":"polite",color:l.itemColor??l.color},l.listProps),{default:()=>{var r,S,x;return[(r=i["prepend-item"])==null?void 0:r.call(i),!U.value.length&&!l.hideNoData&&(((S=i["no-data"])==null?void 0:S.call(i))??e(ce,{title:V(l.noDataText)},null)),e(Dl,{ref:c,renderless:!0,items:U.value},{default:B=>{var ye;let{item:_,index:$,itemRef:z}=B;const he=K(_.props,{ref:z,key:$,active:te.value&&$===0?!0:void 0,onClick:()=>k(_,null)});return((ye=i.item)==null?void 0:ye.call(i,{item:_,index:$,props:he}))??e(ce,K(he,{role:"option"}),{prepend:ne=>{let{isSelected:oe}=ne;return e(O,null,[l.multiple&&!l.hideSelected?e(Il,{key:_.value,modelValue:oe,ripple:!1,tabindex:"-1"},null):void 0,_.props.prependAvatar&&e(tl,{image:_.props.prependAvatar},null),_.props.prependIcon&&e(ee,{icon:_.props.prependIcon},null)])},title:()=>{var ne,oe;return o.value?_.title:$l(_.title,(ne=we(_))==null?void 0:ne.title,((oe=C.value)==null?void 0:oe.length)??0)}})}}),(x=i["append-item"])==null?void 0:x.call(i)]}})]}),p.value.map((r,S)=>{function x(z){z.stopPropagation(),z.preventDefault(),k(r,!1)}const B={"onClick:close":x,onMousedown(z){z.preventDefault(),z.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},_=a?!!i.chip:!!i.selection,$=_?nl(a?i.chip({item:r,index:S,props:B}):i.selection({item:r,index:S})):void 0;if(!(_&&!$))return e("div",{key:r.value,class:["v-combobox__selection",S===f.value&&["v-combobox__selection--selected",Te.value]],style:S===f.value?Ee.value:{}},[a?i.chip?e(ol,{key:"chip-defaults",defaults:{VChip:{closable:l.closableChips,size:"small",text:r.title}}},{default:()=>[$]}):e(_l,K({key:"chip",closable:l.closableChips,size:"small",text:r.title,disabled:r.props.disabled},B),null):$??e("span",{class:"v-combobox__selection-text"},[r.title,l.multiple&&S<p.value.length-1&&e("span",{class:"v-combobox__selection-comma"},[F(",")])])])})]),"append-inner":function(){var B;for(var r=arguments.length,S=new Array(r),x=0;x<r;x++)S[x]=arguments[x];return e(O,null,[(B=i["append-inner"])==null?void 0:B.call(i,...S),(!l.hideNoData||l.items.length)&&l.menuIcon?e(ee,{class:"v-combobox__menu-icon",icon:l.menuIcon,onMousedown:Fe,onClick:ul,"aria-label":V(Ve.value),title:V(Ve.value)},null):void 0])}})}),sl({isFocused:t,isPristine:o,menu:v,search:C,selectionIndex:f,filteredItems:ae,select:k},y)}}),Hl=Y({__name:"PostulantSpecialty",props:{form:{}},emits:["onSuccess"],setup(l,{emit:u}){const m=g([]);return(async()=>{let V=await pe.get("http://segundas.unap.pe/api/programas");console.log("res.data",V.data),m.value=V.data})(),(V,y)=>(D(),L(O,null,[e(se,{flat:"",density:"compact",title:"Especialidad"}),e(le,null,{default:n(()=>[e(Q,null,{default:n(()=>[e(h,{cols:"12",md:"12"},{default:n(()=>[e(Yl,{modelValue:V.form.specialty,"onUpdate:modelValue":y[0]||(y[0]=t=>V.form.specialty=t),items:m.value,label:"Especialidad","item-title":"nombre","item-value":"id","return-object":!1,clearable:!1},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})],64))}}),Jl=Y({__name:"PostulantPhoto",props:{form:{}},setup(l){const u=g(null);return(m,i)=>(D(),L(O,null,[e(se,{flat:"",density:"compact",title:"Foto de postulante"}),e(le,null,{default:n(()=>[e(Q,null,{default:n(()=>[e(h,{cols:"12",md:"12"},{default:n(()=>[e(X,{variant:"tonal",rounded:"0"},{default:n(()=>[e(wl,{"aspect-ratio":1,onOnCropper:i[0]||(i[0]=V=>(u.value=V.blob,m.form.photoAvatar=V.file))}),u.value?(D(),G(dl,{key:0,"aspect-ratio":16/9,src:u.value,height:"250",class:"border"},null,8,["src"])):ve("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64))}}),jl=H("span",{class:"ms-2"},"Subir archivo",-1),Kl=["src"],Gl=Y({__name:"UploadFile",props:{modelValue:{}},emits:["update:modelValue"],setup(l,{emit:u}){const m=l,i=u,V=g(null),y=w({get:()=>m.modelValue,set:R=>i("update:modelValue",R)}),t=g(null),o=g({name:"",size:"",type:""}),s=R=>{const c=R.target.files[0];if(c.size>2e5){alert("El archivo es muy grande");return}if(c.type!=="application/pdf"){alert("El archivo no es un PDF");return}o.value.name=c.name,o.value.size=c.size,o.value.type=c.type,y.value=c;const P=new FileReader;P.onload=v=>{t.value=v.target.result},P.readAsDataURL(c)};return(R,c)=>(D(),L(O,null,[H("input",{type:"file",id:"file",ref_key:"file",ref:V,onChange:s,hidden:"",accept:"application/pdf"},null,544),t.value?(D(),G(X,{key:1,variant:"flat",class:"border","max-height":"350"},{default:n(()=>[e(ce,null,{prepend:n(()=>[e(ee,{size:"35",color:"red"},{default:n(()=>[F("mdi-file-pdf-box")]),_:1})]),append:n(()=>[e(fe,{icon:"",onClick:c[1]||(c[1]=P=>(t.value=null,y.value=null)),variant:"tonal",color:"red",density:"compact"},{default:n(()=>[e(ee,null,{default:n(()=>[F("mdi-close")]),_:1})]),_:1})]),default:n(()=>[e(ml,null,{default:n(()=>[F(me(o.value.name),1)]),_:1}),e(Ce,null,{default:n(()=>[F(me(o.value.size)+" bytes",1)]),_:1}),e(Ce,null,{default:n(()=>[F(me(o.value.type),1)]),_:1})]),_:1}),t.value?(D(),L("embed",{key:0,src:t.value,type:"application/pdf",width:"100%",height:"300px"},null,8,Kl)):ve("",!0)]),_:1})):(D(),L("div",{key:0,class:"upload-box",onClick:c[0]||(c[0]=P=>V.value.click())},[e(ee,null,{default:n(()=>[F("mdi-cloud-upload")]),_:1}),jl]))],64))}}),ql=H("span",{class:"text-caption text-uppercase"}," Titulo universitario ",-1),Ql=Y({__name:"PostulantFiles",props:{form:{}},setup(l){return(u,m)=>(D(),L(O,null,[e(se,{flat:"",density:"compact",title:"Documentos"}),e(le,null,{default:n(()=>[e(Q,null,{default:n(()=>[e(h,{cols:"12"},{default:n(()=>[ql,e(Gl,{modelValue:u.form.fileDocument,"onUpdate:modelValue":m[0]||(m[0]=i=>u.form.fileDocument=i)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})],64))}});class Xl{constructor(){de(this,"http");const u="http://174.138.178.198:8090/api";this.http=pe.create({baseURL:u,headers:{"Content-Type":"application/json"}})}async storeRegistration(u){return(await this.http.post("store-registration",u)).data}async searchRegistrationByPostulantId(u){return(await this.http.get(`search-registration-by-postulant-id/${u}`)).data}}const Wl={key:0,class:"h-100 w-100 d-flex justify-center align-center"},Zl={class:"w-25 mx-auto"},ea=H("h4",null,"Ya realizaste tu preinscripción",-1),ia=Y({__name:"_postulant",setup(l){const u=new Ul,m=new Ol,i=new Xl,V=fl(),y=vl(),t=g(!0),o=g(null),s=g(!1),c=g({postulantId:null,name:"",motherSurname:"",fatherSurname:"",marriedSurname:"",gender:"",birthDate:"",birthPlace:"",residencePlace:"",graduationYear:"",phoneNumber:"",email:"",address:"",maritalStatus:"",specialty:null,fileDocument:null,photoAvatar:null}),P=g(null),v=async()=>{try{const{valid:A}=await P.value.validate();if(!A)return;c.value.postulantId=V.params.postulant;let T=await u.storePostulant(c.value);c.value.postulantId=T,await m.storePreinscriptionFiles(c.value),await i.storeRegistration(c.value),s.value=!0;return}catch{alert("Ocurrio un error")}};return(async()=>{t.value=!0;let A=V.params.postulant,T=await u.searchPostulantById(A);if(T==="The payload is invalid."){y.push("/p/convocatoria-2024/preinscripcion/");return}o.value=T,o.value&&(s.value=await i.searchRegistrationByPostulantId(o.value.HashId)),t.value=!1})(),(A,T)=>(D(),G(cl,{app:"",id:"inspire"},{default:n(()=>[e(yl,{app:"",class:"my-10"},{default:n(()=>[t.value?(D(),L("div",Wl,[H("div",Zl,[e(pl,{indeterminate:"",color:"primary"})])])):s.value&&!t.value?(D(),G(X,{key:1,"max-width":"300px",class:"mx-auto"},{default:n(()=>[e(le,null,{default:n(()=>[ea,e(Vl,{class:"my-4"}),e(fe,{class:"mt-4",color:"primary",block:"",variant:"flat"},{default:n(()=>[F(" Descargar solicitud ")]),_:1})]),_:1})]),_:1})):(D(),G(Al,{key:2,ref_key:"formRef",ref:P,onSubmit:bl(v,["prevent"])},{default:n(()=>[e(X,{"max-width":"700px",class:"mx-auto"},{default:n(()=>[e(Bl,{postulant:o.value,form:c.value},null,8,["postulant","form"]),e(Hl,{form:c.value},null,8,["form"]),e(Ql,{form:c.value},null,8,["form"]),e(Jl,{form:c.value},null,8,["form"]),e(Tl,null,{default:n(()=>[e(hl),e(fe,{color:"primary",block:"",variant:"flat",onClick:v},{default:n(()=>[F(" Guardar ")]),_:1})]),_:1})]),_:1})]),_:1},512))]),_:1})]),_:1}))}});export{ia as default};
