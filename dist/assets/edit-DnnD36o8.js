import{d as B,r as y,o as i,m as U,b as e,w as l,n as A,e as P,F as x,ah as q,a as L,t as r,i as o,h as C,x as p,ab as V,aa as f,p as h,f as M,z as j,$ as z,c as S,q as O,a3 as R,s as H,g as J}from"./index-v34M9sht.js";import{V as K,g as Q,a as W,_ as X}from"./VTabs-BqSJR46P.js";import{a as Y,V as Z}from"./VSelect-Cz9Szmbz.js";import{a as I,b as s,V as _,e as ee,f as ae}from"./VCard-DtqC8YHq.js";import{V as le}from"./VForm-J6UvJptd.js";import{V as b}from"./VTextField-CbM48eH-.js";const te=B({__name:"TabGeneralsEdit",props:{data:Object},emits:["onUpdate"],setup(m,{emit:T}){var w;const D=T,n=m,v=y(null),c=y(!1),u=y({id:(w=n.data)==null?void 0:w.Id,name:null,fatherSurname:null,motherSurname:null,marriedSurname:null,birthDate:null,documentType:null,documentNumber:null}),N=async()=>{var g,t,a,d,G,E,F,$;u.value={id:(g=n.data)==null?void 0:g.Id,name:(t=n.data)==null?void 0:t.Name,fatherSurname:(a=n.data)==null?void 0:a.FatherSurname,motherSurname:(d=n.data)==null?void 0:d.MotherSurname,marriedSurname:(G=n.data)==null?void 0:G.MarriedSurname,birthDate:(E=n.data)==null?void 0:E.BirthDate,documentType:(F=n.data)==null?void 0:F.DocumentType,documentNumber:($=n.data)==null?void 0:$.DocumentNumber}},k=async()=>{console.log(u.value);let{valid:g}=await v.value.validate();if(!g)return;console.log(u.value);let t=await z.post("https://data.segundas.unap.edu.pe/api/postulants/update-generals",u.value,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});t.data===!0?(c.value=!1,D("onUpdate",!0)):alert(t.data.details)};return(g,t)=>(i(),U(x,null,[e(A,{dense:""},{default:l(()=>[e(q,null,{default:l(()=>{var a;return[L("small",null,r((a=m.data)==null?void 0:a.FullName),1)]}),_:1})]),_:1}),e(P,{fluid:""},{default:l(()=>[e(I,null,{default:l(()=>[e(s,{cols:"12",lg:"6"},{default:l(()=>[e(_,{rounded:"0",elevation:"0"},{default:l(()=>[e(ee,{class:"d-flex justify-space-between"},{default:l(()=>[o(" Datos Generales "),e(C,{"prepend-icon":"mdi-pencil",variant:"tonal",color:"primary",onClick:t[0]||(t[0]=a=>(c.value=!0,N()))},{default:l(()=>[o(" Editar ")]),_:1})]),_:1}),e(p,null,{default:l(()=>[e(V,null,{default:l(()=>[o("Nombre Completo")]),_:1}),e(f,null,{default:l(()=>{var a;return[o(r((a=m.data)==null?void 0:a.FullName),1)]}),_:1})]),_:1}),e(p,null,{default:l(()=>[e(V,null,{default:l(()=>[o("Fecha de nacimiento")]),_:1}),e(f,null,{default:l(()=>{var a;return[o(r((a=m.data)==null?void 0:a.BirthDate),1)]}),_:1})]),_:1}),e(p,null,{default:l(()=>[e(V,null,{default:l(()=>[o("Documento de identidad")]),_:1}),e(f,null,{default:l(()=>{var a,d;return[o(r(((a=m.data)==null?void 0:a.DocumentType)==="001"?"DNI":"CE")+" - "+r((d=m.data)==null?void 0:d.DocumentNumber),1)]}),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"12",lg:"6"},{default:l(()=>[e(_,{title:"Datos del Programa",rounded:"0",elevation:"0"},{default:l(()=>[e(p,null,{default:l(()=>[e(V,null,{default:l(()=>[o("Programa academico")]),_:1}),e(f,null,{default:l(()=>{var a;return[o(r((a=m.data)==null?void 0:a.AcademicProgramName),1)]}),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"12",lg:"6"},{default:l(()=>[e(_,{title:"Medios de contacto",rounded:"0",elevation:"0"},{default:l(()=>{var a;return[(i(!0),U(x,null,h((a=m.data)==null?void 0:a.media_contacts,d=>(i(),S(p,{key:d.id},{default:l(()=>[e(V,null,{default:l(()=>[o(r(d.Type==="001"?"Correo Personal":"Telefono Personal"),1)]),_:2},1024),e(f,null,{default:l(()=>[o(r(d.Value),1)]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1}),e(s,{cols:"12",lg:"6"},{default:l(()=>[e(_,{title:"Ubigeos",rounded:"0",elevation:"0"},{default:l(()=>{var a;return[(i(!0),U(x,null,h((a=m.data)==null?void 0:a.places,d=>(i(),S(p,{key:d.id},{default:l(()=>[e(V,null,{default:l(()=>[o(r(d.Type==="001"?"Lugar de nacimiento":"Lugar de residencia"),1)]),_:2},1024),e(f,null,{default:l(()=>[o(r(d.Ubigeo)+" - "+r(`${d.UbigeoData.departamento}, ${d.UbigeoData.provincia}, ${d.UbigeoData.distrito}`),1)]),_:2},1024),d.Address?(i(),S(f,{key:0},{default:l(()=>[e(O,null,{default:l(()=>[o("mdi-map-marker")]),_:1}),o(" "+r(d.Address),1)]),_:2},1024)):R("",!0)]),_:2},1024))),128))]}),_:1})]),_:1})]),_:1})]),_:1}),e(Y,{modelValue:c.value,"onUpdate:modelValue":t[9]||(t[9]=a=>c.value=a),width:"auto"},{default:l(()=>[e(le,{ref_key:"formGenerals",ref:v,onSubmit:M(k,["prevent"])},{default:l(()=>[e(_,{"max-width":"600","prepend-icon":"mdi-pencil",title:"Editar datos generales"},{actions:l(()=>[e(C,{color:"red",variant:"tonal",class:"ms-auto px-4",text:"cancelar",onClick:t[8]||(t[8]=a=>c.value=!1)}),e(j),e(C,{type:"submit",class:"ms-auto px-4",text:"guardar"})]),default:l(()=>[e(ae,null,{default:l(()=>[e(I,null,{default:l(()=>[e(s,{cols:"12"},{default:l(()=>[e(b,{modelValue:u.value.name,"onUpdate:modelValue":t[1]||(t[1]=a=>u.value.name=a),label:"Nombre completo",rules:[a=>!!a||"El nombre es requerido"]},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12",md:"6"},{default:l(()=>[e(b,{modelValue:u.value.fatherSurname,"onUpdate:modelValue":t[2]||(t[2]=a=>u.value.fatherSurname=a),label:"Apellido paterno",rules:[a=>!!a||"El nombre es requerido"]},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12",md:"6"},{default:l(()=>[e(b,{modelValue:u.value.motherSurname,"onUpdate:modelValue":t[3]||(t[3]=a=>u.value.motherSurname=a),label:"Apellido materno"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:l(()=>[e(b,{modelValue:u.value.marriedSurname,"onUpdate:modelValue":t[4]||(t[4]=a=>u.value.marriedSurname=a),label:"Apellido de casada"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:l(()=>[e(b,{modelValue:u.value.birthDate,"onUpdate:modelValue":t[5]||(t[5]=a=>u.value.birthDate=a),label:"Fecha de nacimiento",rules:[a=>!!a||"El nombre es requerido"],type:"date"},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12",md:"6"},{default:l(()=>[e(Z,{disabled:!0,modelValue:u.value.documentType,"onUpdate:modelValue":t[6]||(t[6]=a=>u.value.documentType=a),items:[{title:"DNI",value:"001"},{title:"CE",value:"004"}],label:"Tipo de documento",rules:[a=>!!a||"El nombre es requerido"]},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12",md:"6"},{default:l(()=>[e(b,{disabled:!0,modelValue:u.value.documentNumber,"onUpdate:modelValue":t[7]||(t[7]=a=>u.value.documentNumber=a),label:"NÃºmero de documento",rules:[a=>!!a||"El nombre es requerido"]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1},8,["modelValue"])],64))}}),me=B({__name:"edit",setup(m){const T=H(),D=y(null),n=y("generals"),v=async()=>{D.value=await Q(T.params.id)};return(async()=>{await v()})(),(u,N)=>(i(),U(x,null,[e(K,{modelValue:n.value,"onUpdate:modelValue":N[0]||(N[0]=k=>n.value=k),"bg-color":"grey-lighten-3",rounded:"0"},{default:l(()=>[e(W,{rounded:"0",link:"",to:`/a/postulants/show/${J(T).params.id}/generals`,value:"generals"},{default:l(()=>[o(" General ")]),_:1},8,["to"])]),_:1},8,["modelValue"]),n.value==="generals"?(i(),S(te,{key:0,data:D.value,onOnUpdate:v},null,8,["data"])):(i(),S(X,{key:1}))],64))}});export{me as default};
