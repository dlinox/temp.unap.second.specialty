var je=Object.defineProperty;var He=(l,o,f)=>o in l?je(l,o,{enumerable:!0,configurable:!0,writable:!0,value:f}):l[o]=f;var pe=(l,o,f)=>(He(l,typeof o!="symbol"?o+"":o,f),f);import{d as H,v as U,r as g,o as I,j as k,a as e,w as n,u as A,F as x,k as ce,c as X,p as me,e as ae,q as B,x as Je,y as Ke,z as Ge,A as qe,B as Qe,C as Z,D as Ce,E as Xe,G as We,H as de,I as ee,J as Ie,K as Ze,L as el,M as ll,N as G,O as al,P as be,Q as tl,R as le,S as nl,T as ul,g as $,U as ol,W as sl,X as il,Y as rl,n as dl,f as Te,Z as ml,t as Ve,_ as Se,b as cl,s as fl,i as vl,$ as pl,a0 as Vl,m as bl}from"./index-BsPqOMQd.js";import{i as E,c as De,e as hl,V as yl}from"./VForm-qTyrkvYC.js";import{a as he,V as q,m as gl,u as Al,c as Cl,d as Il,e as Sl}from"./VSelect-CS-N2192.js";import{b as h,a as Q,c as N,V as W,e as _e,m as Dl,u as _l,d as Pl}from"./VTextField-DwuoFuJb.js";import{m as Tl,u as Nl}from"./filter-MeaarkrQ.js";import{_ as El,P as Rl,F as wl}from"./FileService-1V_gCAOp.js";class Ul{constructor(){pe(this,"http");const o="https://api.unap.edu.pe";this.http=he.create({baseURL:o,headers:{"Content-Type":"application/json"}})}async _DocumentTypes(){return(await this.http.get("/TYPE_DOCUMENTS/v1/sunedu/")).data}async _Provinces(o){return(await this.http.get(`/PLACES/v1/provinces/${o}/`)).data.data}async _Districts(o){return(await this.http.get(`/PLACES/v1/districts/${o}/`)).data.data}}const Ol=[{id:"01",name:"AMAZONAS"},{id:"02",name:"ANCASH"},{id:"03",name:"APURIMAC"},{id:"04",name:"AREQUIPA"},{id:"05",name:"AYACUCHO"},{id:"06",name:"CAJAMARCA"},{id:"07",name:"CUSCO"},{id:"08",name:"HUANCAVELICA"},{id:"09",name:"HUANUCO"},{id:"10",name:"ICA"},{id:"11",name:"JUNIN"},{id:"12",name:"LA LIBERTAD"},{id:"13",name:"LAMBAYEQUE"},{id:"14",name:"LIMA"},{id:"15",name:"LORETO"},{id:"16",name:"MADRE DE DIOS"},{id:"17",name:"MOQUEGUA"},{id:"18",name:"PASCO"},{id:"19",name:"PIURA"},{id:"20",name:"PUNO"},{id:"21",name:"SAN MARTIN"},{id:"22",name:"TACNA"},{id:"23",name:"TUMBES"},{id:"24",name:"CALLAO"},{id:"25",name:"UCAYALI"}],Pe=H({__name:"UbigeoForm",props:{modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(l,{emit:o}){const f=o,i=l,V=U({get:()=>i.modelValue,set:r=>{f("update:modelValue",r)}}),y=new Ul,t=Ol,u=g([]),s=g([]),R=g(""),c=g(null),P=async r=>{u.value=[],s.value=[],c.value="",V.value="",u.value=await y._Provinces(r)},v=async r=>{V.value="",s.value=await y._Districts(r)};return(r,w)=>(I(),k(x,null,[e(h,{cols:"12",md:"4"},{default:n(()=>[e(q,{items:A(t),modelValue:R.value,"onUpdate:modelValue":[w[0]||(w[0]=T=>R.value=T),P],label:"Departamento",itemTitle:"name",itemValue:"id",clearable:!1,rules:[A(E)]},null,8,["items","modelValue","rules"])]),_:1}),e(h,{cols:"12",md:"4"},{default:n(()=>[e(q,{items:u.value,modelValue:c.value,"onUpdate:modelValue":[w[1]||(w[1]=T=>c.value=T),v],label:"Provincia",itemTitle:"name",itemValue:"id",clearable:!1,rules:[A(E)]},null,8,["items","modelValue","rules"])]),_:1}),e(h,{cols:"12",md:"4"},{default:n(()=>[e(q,{modelValue:V.value,"onUpdate:modelValue":w[2]||(w[2]=T=>V.value=T),items:s.value,label:"Distrito",itemTitle:"name",itemValue:"id",clearable:!1,rules:[A(E)]},null,8,["modelValue","items","rules"])]),_:1})],64))}}),kl=[{id:"000",name:"SIN DOCUMENTO TRIBUTARIO | NO DOMINIO | SIN REGISTRO ÚNICO DE CONTRIBUYENTES",shortName:"SIN DOCUMENTO TRIBUTARIO"},{id:"001",name:"DOCUMENTO NACIONAL DE IDENTIDAD",shortName:"DNI"},{id:"004",name:"CARNET/CARNÉ DE EXTRANJERÍA",shortName:"CE"},{id:"007",name:"PASAPORTE",shortName:"PASAPORTE"},{id:"00A",name:"CÉDULA DIPLOMÁTICA DE IDENTIDAD",shortName:"CÉDULA DIPLOMÁTICA"},{id:"00F",name:"PERMISO TEMPORAL DE PERMANENCIA PTP",shortName:"PTP"},{id:"201",name:"DOCUMENTO EXTRANJERO - OTROS",shortName:"DOCUMENTO EXTRANJERO"},{id:"202",name:"CARNÉ DE IDENTIDAD",shortName:"CARNÉ DE IDENTIDAD"}],xl=B("small",{class:"text-body-2"},"Lugar de nacimiento",-1),Fl=B("small",{class:"text-body-2"},"Lugar de residencia",-1),Ml=H({__name:"PostulantPersonal",props:{postulant:{},form:{}},emits:["onSuccess"],setup(l,{emit:o}){const f=kl,i=[{text:"Masculino",value:"1"},{text:"Femenino",value:"2"}],V=[{text:"Soltero",value:"1"},{text:"Casado",value:"2"},{text:"Divorciado",value:"3"},{text:"Viudo",value:"4"}];return(async()=>{})(),(t,u)=>(I(),k(x,null,[e(ce,{flat:"",density:"compact",title:"Información personal"}),e(ae,null,{default:n(()=>[e(Q,null,{default:n(()=>[e(h,{cols:"12",md:"6"},{default:n(()=>{var s;return[e(q,{items:A(f),modelValue:(s=t.postulant)==null?void 0:s.DocumentType,label:"Tipo de documento",itemTitle:"shortName",itemValue:"id",clearable:!1,readonly:""},null,8,["items","modelValue"])]}),_:1}),e(h,{cols:"12",md:"6"},{default:n(()=>{var s;return[e(N,{label:"Número de documento",modelValue:(s=t.postulant)==null?void 0:s.DocumentNumber,readonly:"",clearable:!1},null,8,["modelValue"])]}),_:1}),e(h,{cols:"12",md:"12"},{default:n(()=>[e(N,{label:"Nombres",modelValue:t.form.name,"onUpdate:modelValue":u[0]||(u[0]=s=>t.form.name=s),rules:[A(E)]},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"12",md:"6"},{default:n(()=>[e(N,{label:"Apellido paterno",modelValue:t.form.fatherSurname,"onUpdate:modelValue":u[1]||(u[1]=s=>t.form.fatherSurname=s),rules:[A(E)]},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"12",md:"6"},{default:n(()=>[e(N,{label:"Apellido materno",modelValue:t.form.motherSurname,"onUpdate:modelValue":u[2]||(u[2]=s=>t.form.motherSurname=s)},null,8,["modelValue"])]),_:1}),e(h,{cols:"12",md:"4"},{default:n(()=>[e(N,{label:"Fecha de nacimiento",modelValue:t.form.birthDate,"onUpdate:modelValue":u[3]||(u[3]=s=>t.form.birthDate=s),type:"date",rules:[A(E)]},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"6",md:"4"},{default:n(()=>[e(q,{modelValue:t.form.gender,"onUpdate:modelValue":u[4]||(u[4]=s=>t.form.gender=s),items:i,label:"Género",itemTitle:"text",itemValue:"value",clearable:!1,rules:[A(E)]},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"6",md:"4"},{default:n(()=>[e(q,{modelValue:t.form.maritalStatus,"onUpdate:modelValue":u[5]||(u[5]=s=>t.form.maritalStatus=s),items:V,label:"Estado civil",itemTitle:"text",itemValue:"value",clearable:!1,rules:[A(E)]},null,8,["modelValue","rules"])]),_:1}),t.form.gender==="2"&&(t.form.maritalStatus==="2"||t.form.maritalStatus==="3"||t.form.maritalStatus==="4")?(I(),X(h,{key:0,cols:"12",md:"6"},{default:n(()=>[e(N,{label:"Apellido de casada",modelValue:t.form.marriedSurname,"onUpdate:modelValue":u[6]||(u[6]=s=>t.form.marriedSurname=s)},null,8,["modelValue"])]),_:1})):me("",!0),t.postulant.DocumentType==="001"?(I(),X(h,{key:1,cols:"12 pt-0"},{default:n(()=>[e(W,{class:"pb-1",flat:""},{default:n(()=>[e(_e,{class:"pt-0"},{default:n(()=>[xl]),_:1}),e(Q,null,{default:n(()=>[e(Pe,{modelValue:t.form.birthPlace,"onUpdate:modelValue":u[7]||(u[7]=s=>t.form.birthPlace=s)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):me("",!0),e(h,{cols:"12 pt-0"},{default:n(()=>[e(W,{class:"pb-1",flat:""},{default:n(()=>[e(_e,{class:"pt-0"},{default:n(()=>[Fl]),_:1}),e(Q,null,{default:n(()=>[e(Pe,{modelValue:t.form.residencePlace,"onUpdate:modelValue":u[8]||(u[8]=s=>t.form.residencePlace=s)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(h,{cols:"12",md:"6"},{default:n(()=>[e(N,{label:"Teléfono",modelValue:t.form.phoneNumber,"onUpdate:modelValue":u[9]||(u[9]=s=>t.form.phoneNumber=s),rules:[A(E),A(De)]},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"12",md:"6"},{default:n(()=>[e(N,{label:"Correo electrónico",modelValue:t.form.email,"onUpdate:modelValue":u[10]||(u[10]=s=>t.form.email=s),rules:[A(E),A(hl)]},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"12",md:"12"},{default:n(()=>[e(N,{label:"Dirección de residencia",modelValue:t.form.address,"onUpdate:modelValue":u[11]||(u[11]=s=>t.form.address=s),rules:[A(E)]},null,8,["modelValue","rules"])]),_:1}),e(h,{cols:"12",md:"4"},{default:n(()=>[e(N,{label:"Año de graduación",modelValue:t.form.graduationYear,"onUpdate:modelValue":u[12]||(u[12]=s=>t.form.graduationYear=s),rules:[A(E),A(De)],maxLength:"4"},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})],64))}});function Ll(l,o,f){if(o==null)return l;if(Array.isArray(o))throw new Error("Multiple matches is not implemented");return typeof o=="number"&&~o?e(x,null,[e("span",{class:"v-combobox__unmask"},[l.substr(0,o)]),e("span",{class:"v-combobox__mask"},[l.substr(o,f)]),e("span",{class:"v-combobox__unmask"},[l.substr(o+f)])]):l}const $l=Je({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...Tl({filterKeys:["title"]}),...gl({hideNoData:!0,returnObject:!0}),...Ke(Dl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ge({transition:!1})},"VCombobox"),Bl=qe()({name:"VCombobox",props:$l(),emits:{"update:focused":l=>!0,"update:modelValue":l=>!0,"update:search":l=>!0,"update:menu":l=>!0},setup(l,o){var ye;let{emit:f,slots:i}=o;const{t:V}=Qe(),y=g(),t=Z(!1),u=Z(!0),s=Z(!1),R=g(),c=g(),P=Ce(l,"menu"),v=U({get:()=>P.value,set:a=>{var m;P.value&&!a&&((m=R.value)!=null&&m.ΨopenChildren)||(P.value=a)}}),r=Z(-1);let w=!1;const T=U(()=>{var a;return(a=y.value)==null?void 0:a.color}),L=U(()=>v.value?l.closeText:l.openText),{items:te,transformIn:ne,transformOut:ue}=Xe(l),{textColorClasses:Ne,textColorStyles:Ee}=We(T),p=Ce(l,"modelValue",[],a=>ne(il(a)),a=>{const m=ue(a);return l.multiple?m:m[0]??null}),J=_l(),K=Z(l.multiple?"":((ye=p.value[0])==null?void 0:ye.title)??""),C=U({get:()=>K.value,set:a=>{var m;if(K.value=a??"",l.multiple||(p.value=[de(l,a)]),a&&l.multiple&&((m=l.delimiters)!=null&&m.length)){const b=a.split(new RegExp(`(?:${l.delimiters.join("|")})+`));b.length>1&&(b.forEach(D=>{D=D.trim(),D&&F(de(l,D))}),K.value="")}a||(r.value=-1),u.value=!a}}),Re=U(()=>typeof l.counterValue=="function"?l.counterValue(p.value):typeof l.counterValue=="number"?l.counterValue:l.multiple?p.value.length:C.value.length);ee(K,a=>{w?Ie(()=>w=!1):t.value&&!v.value&&(v.value=!0),f("update:search",a)}),ee(p,a=>{var m;l.multiple||(K.value=((m=a[0])==null?void 0:m.title)??"")});const{filteredItems:oe,getMatches:we}=Nl(l,te,()=>u.value?"":C.value),O=U(()=>l.hideSelected?oe.value.filter(a=>!p.value.some(m=>m.value===a.value)):oe.value),Ue=U(()=>p.value.map(a=>a.value)),se=U(()=>{var m;return(l.autoSelectFirst===!0||l.autoSelectFirst==="exact"&&C.value===((m=O.value[0])==null?void 0:m.title))&&O.value.length>0&&!u.value&&!s.value}),fe=U(()=>l.hideNoData&&!O.value.length||l.readonly||(J==null?void 0:J.isReadonly.value)),ve=g(),{onListScroll:Oe,onListKeydown:ke}=Al(ve,y);function xe(a){w=!0,l.openOnClear&&(v.value=!0)}function Fe(){fe.value||(v.value=!0)}function Me(a){fe.value||(t.value&&(a.preventDefault(),a.stopPropagation()),v.value=!v.value)}function Le(a){var D;if(rl(a)||l.readonly||J!=null&&J.isReadonly.value)return;const m=y.value.selectionStart,b=p.value.length;if((r.value>-1||["Enter","ArrowDown","ArrowUp"].includes(a.key))&&a.preventDefault(),["Enter","ArrowDown"].includes(a.key)&&(v.value=!0),["Escape"].includes(a.key)&&(v.value=!1),["Enter","Escape","Tab"].includes(a.key)&&(se.value&&["Enter","Tab"].includes(a.key)&&F(oe.value[0]),u.value=!0),a.key==="ArrowDown"&&se.value&&((D=ve.value)==null||D.focus("next")),!!l.multiple){if(["Backspace","Delete"].includes(a.key)){if(r.value<0){a.key==="Backspace"&&!C.value&&(r.value=b-1);return}const d=r.value,S=p.value[r.value];S&&!S.props.disabled&&F(S,!1),r.value=d>=b-1?b-2:d}if(a.key==="ArrowLeft"){if(r.value<0&&m>0)return;const d=r.value>-1?r.value-1:b-1;p.value[d]?r.value=d:(r.value=-1,y.value.setSelectionRange(C.value.length,C.value.length))}if(a.key==="ArrowRight"){if(r.value<0)return;const d=r.value+1;p.value[d]?r.value=d:(r.value=-1,y.value.setSelectionRange(0,0))}a.key==="Enter"&&C.value&&(F(de(l,C.value)),C.value="")}}function $e(){var a;t.value&&(u.value=!0,(a=y.value)==null||a.focus())}function F(a){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(l.multiple){const b=p.value.findIndex(d=>l.valueComparator(d.value,a.value)),D=m??!~b;if(~b){const d=D?[...p.value,a]:[...p.value];d.splice(b,1),p.value=d}else D&&(p.value=[...p.value,a]);l.clearOnSelect&&(C.value="")}else{const b=m!==!1;p.value=b?[a]:[],K.value=b?a.title:"",Ie(()=>{v.value=!1,u.value=!0})}}function Be(a){t.value=!0,setTimeout(()=>{s.value=!0})}function ze(a){s.value=!1}function Ye(a){(a==null||a===""&&!l.multiple)&&(p.value=[])}return ee(t,(a,m)=>{a||a===m||(r.value=-1,v.value=!1,se.value&&!s.value&&!p.value.some(b=>{let{value:D}=b;return D===O.value[0].value})?F(O.value[0]):l.multiple&&C.value&&F(de(l,C.value)))}),ee(v,()=>{if(!l.hideSelected&&v.value&&p.value.length){const a=O.value.findIndex(m=>p.value.some(b=>l.valueComparator(b.value,m.value)));Ze&&window.requestAnimationFrame(()=>{var m;a>=0&&((m=c.value)==null||m.scrollToIndex(a))})}}),ee(O,(a,m)=>{t.value&&(!a.length&&l.hideNoData&&(v.value=!1),!m.length&&a.length&&(v.value=!0))}),el(()=>{const a=!!(l.chips||i.chip),m=!!(!l.hideNoData||O.value.length||i["prepend-item"]||i["append-item"]||i["no-data"]),b=p.value.length>0,D=N.filterProps(l);return e(N,G({ref:y},D,{modelValue:C.value,"onUpdate:modelValue":[d=>C.value=d,Ye],focused:t.value,"onUpdate:focused":d=>t.value=d,validationValue:p.externalValue,counterValue:Re.value,dirty:b,class:["v-combobox",{"v-combobox--active-menu":v.value,"v-combobox--chips":!!l.chips,"v-combobox--selection-slot":!!i.selection,"v-combobox--selecting-index":r.value>-1,[`v-combobox--${l.multiple?"multiple":"single"}`]:!0},l.class],style:l.style,readonly:l.readonly,placeholder:b?void 0:l.placeholder,"onClick:clear":xe,"onMousedown:control":Fe,onKeydown:Le}),{...i,default:()=>e(x,null,[e(ll,G({ref:R,modelValue:v.value,"onUpdate:modelValue":d=>v.value=d,activator:"parent",contentClass:"v-combobox__content",disabled:fe.value,eager:l.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:l.transition,onAfterLeave:$e},l.menuProps),{default:()=>[m&&e(al,G({ref:ve,selected:Ue.value,selectStrategy:l.multiple?"independent":"single-independent",onMousedown:d=>d.preventDefault(),onKeydown:ke,onFocusin:Be,onFocusout:ze,onScrollPassive:Oe,tabindex:"-1","aria-live":"polite",color:l.itemColor??l.color},l.listProps),{default:()=>{var d,S,M;return[(d=i["prepend-item"])==null?void 0:d.call(i),!O.value.length&&!l.hideNoData&&(((S=i["no-data"])==null?void 0:S.call(i))??e(be,{title:V(l.noDataText)},null)),e(Cl,{ref:c,renderless:!0,items:O.value},{default:z=>{var Ae;let{item:_,index:Y,itemRef:j}=z;const ge=G(_.props,{ref:j,key:Y,active:se.value&&Y===0?!0:void 0,onClick:()=>F(_,null)});return((Ae=i.item)==null?void 0:Ae.call(i,{item:_,index:Y,props:ge}))??e(be,G(ge,{role:"option"}),{prepend:ie=>{let{isSelected:re}=ie;return e(x,null,[l.multiple&&!l.hideSelected?e(Il,{key:_.value,modelValue:re,ripple:!1,tabindex:"-1"},null):void 0,_.props.prependAvatar&&e(tl,{image:_.props.prependAvatar},null),_.props.prependIcon&&e(le,{icon:_.props.prependIcon},null)])},title:()=>{var ie,re;return u.value?_.title:Ll(_.title,(ie=we(_))==null?void 0:ie.title,((re=C.value)==null?void 0:re.length)??0)}})}}),(M=i["append-item"])==null?void 0:M.call(i)]}})]}),p.value.map((d,S)=>{function M(j){j.stopPropagation(),j.preventDefault(),F(d,!1)}const z={"onClick:close":M,onMousedown(j){j.preventDefault(),j.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},_=a?!!i.chip:!!i.selection,Y=_?nl(a?i.chip({item:d,index:S,props:z}):i.selection({item:d,index:S})):void 0;if(!(_&&!Y))return e("div",{key:d.value,class:["v-combobox__selection",S===r.value&&["v-combobox__selection--selected",Ne.value]],style:S===r.value?Ee.value:{}},[a?i.chip?e(ul,{key:"chip-defaults",defaults:{VChip:{closable:l.closableChips,size:"small",text:d.title}}},{default:()=>[Y]}):e(Sl,G({key:"chip",closable:l.closableChips,size:"small",text:d.title,disabled:d.props.disabled},z),null):Y??e("span",{class:"v-combobox__selection-text"},[d.title,l.multiple&&S<p.value.length-1&&e("span",{class:"v-combobox__selection-comma"},[$(",")])])])})]),"append-inner":function(){var z;for(var d=arguments.length,S=new Array(d),M=0;M<d;M++)S[M]=arguments[M];return e(x,null,[(z=i["append-inner"])==null?void 0:z.call(i,...S),(!l.hideNoData||l.items.length)&&l.menuIcon?e(le,{class:"v-combobox__menu-icon",icon:l.menuIcon,onMousedown:Me,onClick:ol,"aria-label":V(L.value),title:V(L.value)},null):void 0])}})}),sl({isFocused:t,isPristine:u,menu:v,search:C,selectionIndex:r,filteredItems:oe,select:F},y)}}),zl=H({__name:"PostulantSpecialty",props:{form:{}},emits:["onSuccess"],setup(l,{emit:o}){const f=g([]);return(async()=>{let V=await he.get("http://segundas.unap.pe/api/programas");console.log("res.data",V.data),f.value=V.data})(),(V,y)=>(I(),k(x,null,[e(ce,{flat:"",density:"compact",title:"Especialidad"}),e(ae,null,{default:n(()=>[e(Q,null,{default:n(()=>[e(h,{cols:"12",md:"12"},{default:n(()=>[e(Bl,{modelValue:V.form.specialty,"onUpdate:modelValue":y[0]||(y[0]=t=>V.form.specialty=t),items:f.value,label:"Especialidad","item-title":"nombre","item-value":"id","return-object":!1,clearable:!1},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})],64))}}),Yl=H({__name:"PostulantPhoto",props:{form:{}},setup(l){const o=g(null);return(f,i)=>(I(),k(x,null,[e(ce,{flat:"",density:"compact",title:"Foto de postulante"}),e(ae,null,{default:n(()=>[e(Q,null,{default:n(()=>[e(h,{cols:"12",md:"12"},{default:n(()=>[e(W,{variant:"tonal",rounded:"0"},{default:n(()=>[e(El,{"aspect-ratio":3/4,"is-resizable":!0,"is-aspect-ratio":!1,onOnCropper:i[0]||(i[0]=V=>(o.value=V.blob,f.form.photoAvatar=V.file))}),o.value?(I(),X(dl,{key:0,"aspect-ratio":16/9,src:o.value,height:"250",class:"border"},null,8,["src"])):me("",!0)]),_:1})]),_:1})]),_:1})]),_:1})],64))}}),jl=B("span",{class:"ms-2"},"Subir archivo",-1),Hl=["src"],Jl=H({__name:"UploadFile",props:{modelValue:{}},emits:["update:modelValue"],setup(l,{emit:o}){const f=l,i=o,V=g(null),y=U({get:()=>f.modelValue,set:R=>i("update:modelValue",R)}),t=g(null),u=g({name:"",size:"",type:""}),s=R=>{const c=R.target.files[0];if(console.log(c.size),console.log(c),c.size>2e6){alert("El archivo es muy grande");return}if(c.type!=="application/pdf"){alert("El archivo no es un PDF");return}u.value.name=c.name,u.value.size=c.size,u.value.type=c.type,y.value=c;const P=new FileReader;P.onload=v=>{t.value=v.target.result},P.readAsDataURL(c)};return(R,c)=>(I(),k(x,null,[B("input",{type:"file",id:"file",ref_key:"file",ref:V,onChange:s,hidden:"",accept:"application/pdf"},null,544),t.value?(I(),X(W,{key:1,variant:"flat",class:"border","max-height":"350"},{default:n(()=>[e(be,null,{prepend:n(()=>[e(le,{size:"35",color:"red"},{default:n(()=>[$("mdi-file-pdf-box")]),_:1})]),append:n(()=>[e(Te,{icon:"",onClick:c[1]||(c[1]=P=>(t.value=null,y.value=null)),variant:"tonal",color:"red",density:"compact"},{default:n(()=>[e(le,null,{default:n(()=>[$("mdi-close")]),_:1})]),_:1})]),default:n(()=>[e(ml,null,{default:n(()=>[$(Ve(u.value.name),1)]),_:1}),e(Se,null,{default:n(()=>[$(Ve(u.value.size)+" bytes",1)]),_:1}),e(Se,null,{default:n(()=>[$(Ve(u.value.type),1)]),_:1})]),_:1}),t.value?(I(),k("embed",{key:0,src:t.value,type:"application/pdf",width:"100%",height:"300px"},null,8,Hl)):me("",!0)]),_:1})):(I(),k("div",{key:0,class:"upload-box",onClick:c[0]||(c[0]=P=>V.value.click())},[e(le,null,{default:n(()=>[$("mdi-cloud-upload")]),_:1}),jl]))],64))}}),Kl=B("span",{class:"text-caption text-uppercase"}," Titulo universitario ",-1),Gl=H({__name:"PostulantFiles",props:{form:{}},setup(l){return(o,f)=>(I(),k(x,null,[e(ce,{flat:"",density:"compact",title:"Documentos"}),e(ae,null,{default:n(()=>[e(Q,null,{default:n(()=>[e(h,{cols:"12"},{default:n(()=>[Kl,e(Jl,{modelValue:o.form.fileDocument,"onUpdate:modelValue":f[0]||(f[0]=i=>o.form.fileDocument=i)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})],64))}});class ql{constructor(){pe(this,"http");const o="http://174.138.178.198:8090/api";this.http=he.create({baseURL:o,headers:{"Content-Type":"application/json"}})}async storeRegistration(o){return(await this.http.post("store-registration",o)).data}async searchRegistrationByPostulantId(o){return(await this.http.get(`search-registration-by-postulant-id/${o}`)).data}}const Ql={class:"h-min-screen"},Xl={key:0,class:"h-100 w-100 d-flex justify-center align-center"},Wl={class:"w-25 mx-auto"},Zl=B("h4",null,"Ya realizaste tu preinscripción",-1),ea=["href"],ia=H({__name:"_postulant",setup(l){const o=new Rl,f=new wl,i=new ql,V=fl(),y=vl(),t=g(!0),u=g(null),s=g(!1),c=g({postulantId:null,name:"",motherSurname:"",fatherSurname:"",marriedSurname:"",gender:"",birthDate:"",birthPlace:"",residencePlace:"",graduationYear:"",phoneNumber:"",email:"",address:"",maritalStatus:"",specialty:null,fileDocument:null,photoAvatar:null}),P=g(null),v=async()=>{try{const{valid:T}=await P.value.validate();if(!T)return;c.value.postulantId=V.params.postulant;let L=await o.storePostulant(c.value);c.value.postulantId=L,await f.storePreinscriptionFiles(c.value),r.value=await i.storeRegistration(c.value),Object.keys(r.value).length>0&&(s.value=!0);return}catch{alert("Ocurrio un error")}},r=g(null);return(async()=>{t.value=!0;let T=V.params.postulant,L=await o.searchPostulantById(T);if(L==="The payload is invalid."){y.push("/p/convocatoria-2024/preinscripcion/");return}u.value=L,u.value&&(r.value=await i.searchRegistrationByPostulantId(u.value.HashId),Object.keys(r.value).length>0&&(s.value=!0)),t.value=!1})(),(T,L)=>(I(),k("div",Ql,[t.value?(I(),k("div",Xl,[B("div",Wl,[e(pl,{indeterminate:"",color:"primary"})])])):s.value&&!t.value?(I(),X(W,{key:1,"max-width":"300px",class:"mx-auto my-10"},{default:n(()=>[e(ae,null,{default:n(()=>{var te,ne,ue;return[Zl,e(Vl,{class:"my-4"}),B("a",{class:"v-btn v-theme--light bg-primary v-btn--density-default rounded-lg v-btn--size-default v-btn--variant-flat w-100",href:`http://174.138.178.198:8097/api/pdf-solicitud/${(te=r.value)==null?void 0:te.CallId}-${(ne=r.value)==null?void 0:ne.AcademicProgramId}-${(ue=r.value)==null?void 0:ue.PostulantId}`}," Descargar solicitud ",8,ea)]}),_:1})]),_:1})):(I(),X(yl,{key:2,ref_key:"formRef",ref:P,onSubmit:cl(v,["prevent"])},{default:n(()=>[e(W,{"max-width":"700px",class:"mx-auto"},{default:n(()=>[e(Ml,{postulant:u.value,form:c.value},null,8,["postulant","form"]),e(zl,{form:c.value},null,8,["form"]),e(Gl,{form:c.value},null,8,["form"]),e(Yl,{form:c.value},null,8,["form"]),e(Pl,null,{default:n(()=>[e(bl),e(Te,{color:"primary",block:"",variant:"flat",onClick:v},{default:n(()=>[$(" Guardar ")]),_:1})]),_:1})]),_:1})]),_:1},512))]))}});export{ia as default};
