import{d as j,r as p,o as i,m as k,b as e,w as a,n as K,e as Q,F as N,ah as W,a as X,t as r,i as o,h as _,x as y,ab as S,aa as V,p as M,f as h,z as A,$ as P,c as D,q,a3 as Y,s as Z,g as ee}from"./index-B7kCtcGl.js";import{V as ae,g as le,a as te,_ as ue}from"./VTabs-CXClv50a.js";import{a as L,V as de}from"./VSelect-DPHmT9sv.js";import{a as $,b as s,V as C,e as oe,f as z}from"./VCard-D7nfxHvf.js";import{V as R}from"./VForm-DJLJvXUm.js";import{V as v}from"./VTextField-DqB-JfF8.js";const ne=j({__name:"TabGeneralsEdit",props:{data:Object},emits:["onUpdate"],setup(m,{emit:U}){var G;const T=U,n=m,x=p(null),w=p(null),b=p(!1),f=p(!1),g=p({Id:null,Type:null,Value:null,Status:null,PostulantId:null}),d=p({id:(G=n.data)==null?void 0:G.Id,name:null,fatherSurname:null,motherSurname:null,marriedSurname:null,birthDate:null,documentType:null,documentNumber:null}),O=async()=>{var c,t,l,u,E,I,F,B;d.value={id:(c=n.data)==null?void 0:c.Id,name:(t=n.data)==null?void 0:t.Name,fatherSurname:(l=n.data)==null?void 0:l.FatherSurname,motherSurname:(u=n.data)==null?void 0:u.MotherSurname,marriedSurname:(E=n.data)==null?void 0:E.MarriedSurname,birthDate:(I=n.data)==null?void 0:I.BirthDate,documentType:(F=n.data)==null?void 0:F.DocumentType,documentNumber:(B=n.data)==null?void 0:B.DocumentNumber}},H=async()=>{console.log(d.value);let{valid:c}=await x.value.validate();if(!c)return;console.log(d.value);let t=await P.post("https://data.segundas.unap.edu.pe/api/postulants/update-generals",d.value,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});t.data===!0?(b.value=!1,T("onUpdate",!0)):alert(t.data.details)},J=async()=>{let{valid:c}=await w.value.validate();if(!c)return;let t=await P.post("https://data.segundas.unap.edu.pe/api/postulants/update-media-contacts/",g.value,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});t.data===!0?(f.value=!1,T("onUpdate",!0)):alert(t.data.details)};return(c,t)=>(i(),k(N,null,[e(K,{dense:""},{default:a(()=>[e(W,null,{default:a(()=>{var l;return[X("small",null,r((l=m.data)==null?void 0:l.FullName),1)]}),_:1})]),_:1}),e(Q,{fluid:""},{default:a(()=>[e($,null,{default:a(()=>[e(s,{cols:"12",lg:"6"},{default:a(()=>[e(C,{rounded:"0",elevation:"0"},{default:a(()=>[e(oe,{class:"d-flex justify-space-between"},{default:a(()=>[o(" Datos Generales "),e(_,{"prepend-icon":"mdi-pencil",variant:"tonal",color:"primary",onClick:t[0]||(t[0]=l=>(b.value=!0,O()))},{default:a(()=>[o(" Editar ")]),_:1})]),_:1}),e(y,null,{default:a(()=>[e(S,null,{default:a(()=>[o("Nombre Completo")]),_:1}),e(V,null,{default:a(()=>{var l;return[o(r((l=m.data)==null?void 0:l.FullName),1)]}),_:1})]),_:1}),e(y,null,{default:a(()=>[e(S,null,{default:a(()=>[o("Fecha de nacimiento")]),_:1}),e(V,null,{default:a(()=>{var l;return[o(r((l=m.data)==null?void 0:l.BirthDate),1)]}),_:1})]),_:1}),e(y,null,{default:a(()=>[e(S,null,{default:a(()=>[o("Documento de identidad")]),_:1}),e(V,null,{default:a(()=>{var l,u;return[o(r(((l=m.data)==null?void 0:l.DocumentType)==="001"?"DNI":"CE")+" - "+r((u=m.data)==null?void 0:u.DocumentNumber),1)]}),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"12",lg:"6"},{default:a(()=>[e(C,{title:"Datos del Programa",rounded:"0",elevation:"0"},{default:a(()=>[e(y,null,{default:a(()=>[e(S,null,{default:a(()=>[o("Programa academico")]),_:1}),e(V,null,{default:a(()=>{var l;return[o(r((l=m.data)==null?void 0:l.AcademicProgramName),1)]}),_:1})]),_:1})]),_:1})]),_:1}),e(s,{cols:"12",lg:"6"},{default:a(()=>[e(C,{title:"Medios de contacto",rounded:"0",elevation:"0"},{default:a(()=>{var l;return[(i(!0),k(N,null,M((l=m.data)==null?void 0:l.media_contacts,u=>(i(),D(y,{key:u.id},{append:a(()=>[e(_,{variant:"tonal",size:"small",icon:"",color:"primary",onClick:E=>(f.value=!0,g.value=u)},{default:a(()=>[e(q,null,{default:a(()=>[o("mdi-pencil")]),_:1})]),_:2},1032,["onClick"])]),default:a(()=>[e(S,null,{default:a(()=>[o(r(u.Type==="001"?"Correo Personal":"Telefono Personal"),1)]),_:2},1024),e(V,null,{default:a(()=>[o(r(u.Value),1)]),_:2},1024)]),_:2},1024))),128))]}),_:1})]),_:1}),e(s,{cols:"12",lg:"6"},{default:a(()=>[e(C,{title:"Ubigeos",rounded:"0",elevation:"0"},{default:a(()=>{var l;return[(i(!0),k(N,null,M((l=m.data)==null?void 0:l.places,u=>(i(),D(y,{key:u.id},{default:a(()=>[e(S,null,{default:a(()=>[o(r(u.Type==="001"?"Lugar de nacimiento":"Lugar de residencia"),1)]),_:2},1024),e(V,null,{default:a(()=>[o(r(u.Ubigeo)+" - "+r(`${u.UbigeoData.departamento}, ${u.UbigeoData.provincia}, ${u.UbigeoData.distrito}`),1)]),_:2},1024),u.Address?(i(),D(V,{key:0},{default:a(()=>[e(q,null,{default:a(()=>[o("mdi-map-marker")]),_:1}),o(" "+r(u.Address),1)]),_:2},1024)):Y("",!0)]),_:2},1024))),128))]}),_:1})]),_:1})]),_:1})]),_:1}),e(L,{modelValue:b.value,"onUpdate:modelValue":t[9]||(t[9]=l=>b.value=l),width:"auto"},{default:a(()=>[e(R,{ref_key:"formGenerals",ref:x,onSubmit:h(H,["prevent"])},{default:a(()=>[e(C,{"max-width":"600","prepend-icon":"mdi-pencil",title:"Editar datos generales"},{actions:a(()=>[e(_,{color:"red",variant:"tonal",class:"ms-auto px-4",text:"cancelar",onClick:t[8]||(t[8]=l=>b.value=!1)}),e(A),e(_,{type:"submit",class:"ms-auto px-4",text:"guardar"})]),default:a(()=>[e(z,null,{default:a(()=>[e($,null,{default:a(()=>[e(s,{cols:"12"},{default:a(()=>[e(v,{modelValue:d.value.name,"onUpdate:modelValue":t[1]||(t[1]=l=>d.value.name=l),label:"Nombre completo",rules:[l=>!!l||"El nombre es requerido"]},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12",md:"6"},{default:a(()=>[e(v,{modelValue:d.value.fatherSurname,"onUpdate:modelValue":t[2]||(t[2]=l=>d.value.fatherSurname=l),label:"Apellido paterno",rules:[l=>!!l||"El nombre es requerido"]},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12",md:"6"},{default:a(()=>[e(v,{modelValue:d.value.motherSurname,"onUpdate:modelValue":t[3]||(t[3]=l=>d.value.motherSurname=l),label:"Apellido materno"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:a(()=>[e(v,{modelValue:d.value.marriedSurname,"onUpdate:modelValue":t[4]||(t[4]=l=>d.value.marriedSurname=l),label:"Apellido de casada"},null,8,["modelValue"])]),_:1}),e(s,{cols:"12",md:"6"},{default:a(()=>[e(v,{modelValue:d.value.birthDate,"onUpdate:modelValue":t[5]||(t[5]=l=>d.value.birthDate=l),label:"Fecha de nacimiento",rules:[l=>!!l||"El nombre es requerido"],type:"date"},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12",md:"6"},{default:a(()=>[e(de,{disabled:!0,modelValue:d.value.documentType,"onUpdate:modelValue":t[6]||(t[6]=l=>d.value.documentType=l),items:[{title:"DNI",value:"001"},{title:"CE",value:"004"}],label:"Tipo de documento",rules:[l=>!!l||"El nombre es requerido"]},null,8,["modelValue","rules"])]),_:1}),e(s,{cols:"12",md:"6"},{default:a(()=>[e(v,{disabled:!0,modelValue:d.value.documentNumber,"onUpdate:modelValue":t[7]||(t[7]=l=>d.value.documentNumber=l),label:"NÃºmero de documento",rules:[l=>!!l||"El nombre es requerido"]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1},8,["modelValue"]),e(L,{modelValue:f.value,"onUpdate:modelValue":t[12]||(t[12]=l=>f.value=l),width:"400"},{default:a(()=>[e(R,{ref_key:"formMediaContactsRef",ref:w,onSubmit:h(J,["prevent"])},{default:a(()=>[e(C,{"max-width":"600","prepend-icon":"mdi-pencil",title:"Editar medio de contacto"},{actions:a(()=>[e(_,{color:"red",variant:"tonal",class:"ms-auto px-4",text:"cancelar",onClick:t[11]||(t[11]=l=>f.value=!1)}),e(A),e(_,{type:"submit",class:"ms-auto px-4",text:"guardar"})]),default:a(()=>[e(z,null,{default:a(()=>[e($,null,{default:a(()=>[e(s,{cols:"12"},{default:a(()=>[e(v,{modelValue:g.value.Value,"onUpdate:modelValue":t[10]||(t[10]=l=>g.value.Value=l),label:"Value",rules:[l=>!!l||"El nombre es requerido"]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1},8,["modelValue"])],64))}}),ce=j({__name:"edit",setup(m){const U=Z(),T=p(null),n=p("generals"),x=async()=>{T.value=await le(U.params.id)};return(async()=>{await x()})(),(b,f)=>(i(),k(N,null,[e(ae,{modelValue:n.value,"onUpdate:modelValue":f[0]||(f[0]=g=>n.value=g),"bg-color":"grey-lighten-3",rounded:"0"},{default:a(()=>[e(te,{rounded:"0",link:"",to:`/a/postulants/show/${ee(U).params.id}/generals`,value:"generals"},{default:a(()=>[o(" General ")]),_:1},8,["to"])]),_:1},8,["modelValue"]),n.value==="generals"?(i(),D(ne,{key:0,data:T.value,onOnUpdate:x},null,8,["data"])):(i(),D(ue,{key:1}))],64))}});export{ce as default};
