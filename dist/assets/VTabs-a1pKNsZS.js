import{$ as _e,d as xe,s as Ce,r as n,o as h,m as Z,b as e,w as a,c as j,e as N,i as s,h as v,n as q,z as R,F as W,p as oe,x as D,S as ee,t as _,q as X,ab as Ve,aa as U,a as H,f as ne,B as me,C as Se,ai as Ie,E as fe,L as ke,J as te,P as pe,R as le,X as Ae,aj as we,ak as Ee,al as Fe,am as Te,I as he,an as Be,ao as $e,ap as B,aq as Pe,ar as ze,as as Me}from"./index-C8FKfZZc.js";import{V as $,a as ae,b as P,e as se,c as re}from"./VCard-CwJbaXpt.js";import{V as Re}from"./VAlert-QDyDToHi.js";import{d as J,V as De,a as ie,i as Le,j as ue}from"./VSelect-aG98Ihh1.js";import{V as de}from"./VForm-CnPRUg_9.js";import{V as ce}from"./VTextField-C5n-mpYI.js";const Oe="https://data.segundas.unap.edu.pe/api",z=_e.create({baseURL:Oe,headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}),ta=async t=>(await z.get("postulants/generals/"+t)).data,Ue=async t=>(await z.get("postulants/evaluation/"+t)).data,Ge=async t=>(await z.post("postulants/evaluation",t)).data,ve=async t=>(await z.post("postulants/evaluation-detail",t)).data,Ye=async t=>(await z.post("postulants/experience/minus",t)).data,je=async t=>(await z.post("postulants/experience/add",t)).data,Ne=async t=>(await z.delete("postulants/evaluation/"+t)).data,la=xe({__name:"TabCv",setup(t){const r=Ce(),i=n({indicator:null,description:"",criteria:1,evaluationId:null}),x=n({indicator:{id:3,name:"Certificación",score:1},description:"Años de Experiencia",criteria:2,evaluationId:null}),C=n({indicator:{id:4,name:"Certificación",score:.25},description:"",criteria:3,evaluationId:null}),S=n(null),d=n(0),y=n(null),m=n(0),f=n(null),L=n(0),V=n(0),c=n(!1),M=n(!1),I=n(!1),F=n(!1),T=n(!1),O=n(!1),u=n(null),k=n([{id:1,name:"Título profesional",score:8},{id:2,name:"Maestría",score:2}]),A=n([{id:1,name:"Formación académica",description:"Formación académica",maxScore:20},{id:2,name:"Experiencia laboral",description:"Experiencia laboral",maxScore:20},{id:3,name:"Capacitaciones",description:"Formación profesional",maxScore:20}]),b=async()=>{let p=await Ue(r.params.id);u.value=p||null;let o=p.details;S.value=o.filter(l=>l.EvaluationIndicatorId===1||l.EvaluationIndicatorId===2),y.value=o.filter(l=>l.EvaluationIndicatorId===3),f.value=o.filter(l=>l.EvaluationIndicatorId===4),d.value=S.value.reduce((l,g)=>l+parseFloat(g.Score)*parseFloat(g.Amount),0),m.value=y.value.reduce((l,g)=>l+parseFloat(g.Score)*parseFloat(g.Amount),0),L.value=f.value.reduce((l,g)=>l+parseFloat(g.Score)*parseFloat(g.Amount),0),d.value=d.value>10?10:d.value,V.value=d.value+m.value+L.value},G=async()=>{let p={postulantId:r.params.id,callId:1},o=await Ge(p);u.value=o?o.evaluacion:null},w=async()=>{try{M.value=!0,i.value.evaluationId=u.value.Id,await ve(i.value),await b(),M.value=!1,i.value.indicator=null,i.value.description="",c.value=!1}catch{alert("Ocurrio un error")}},K=async()=>{try{F.value=!0,C.value.evaluationId=u.value.Id,await ve(C.value),I.value=!1,F.value=!1,C.value.description="",await b()}catch{alert("Ocurrio un error")}},Q=async()=>{O.value=!0,x.value.evaluationId=u.value.Id,await je(x.value),await b(),O.value=!1},E=async()=>{T.value=!0,x.value.evaluationId=u.value.Id,await Ye(x.value),await b(),T.value=!1},Y=async(p,o,l)=>{l==="FA"?S.value[o].loading=!0:f.value[o].loading=!0,await Ne(p),await b()};return(async()=>{await b()})(),(p,o)=>(h(),Z(W,null,[e(N,{fluid:""},{default:a(()=>[u.value===null?(h(),j($,{key:0,class:"text-center mx-auto my-5",width:"300"},{default:a(()=>[e(N,null,{default:a(()=>[e(Re,{type:"info",variant:"text",class:"mb-5"},{default:a(()=>[s(" Aún no se ha iniciado la evaluación ")]),_:1}),e(v,{block:"",onClick:G},{default:a(()=>[s(" Iniciar Evaluación ")]),_:1})]),_:1})]),_:1})):(h(),j(ae,{key:1},{default:a(()=>[e(P,{cols:"12"},{default:a(()=>[e($,{rounded:"0",elevation:"0"},{default:a(()=>[e(q,{density:"compact",title:A.value[0].name},{default:a(()=>[e(R),e(v,{"append-icon":"mdi-plus",onClick:o[0]||(o[0]=l=>c.value=!0),variant:"outlined",rounded:"lg",class:"me-4"},{default:a(()=>[s(" Agregar ")]),_:1})]),_:1},8,["title"]),(h(!0),Z(W,null,oe(S.value,(l,g)=>(h(),j(D,{key:l.Id,class:"border-b py-2"},{prepend:a(()=>[e(ee,null,{default:a(()=>[s(_((parseInt(l.Score)*parseInt(l.Amount)).toFixed(2)),1)]),_:2},1024)]),append:a(()=>[e(v,{icon:"",rounded:"lg",variant:"tonal",color:"red",onClick:ye=>Y(l.Id,g,"FA"),loading:l.loading},{default:a(()=>[e(X,null,{default:a(()=>[s("mdi-delete")]),_:1})]),_:2},1032,["onClick","loading"])]),default:a(()=>[e(Ve,null,{default:a(()=>[s(_(l.EvaluationIndicatorId===1?"Título profesional":"Maestría"),1)]),_:2},1024),e(U,null,{default:a(()=>[s(_(l.Observations),1)]),_:2},1024)]),_:2},1024))),128)),e(D,{class:"border-b py-2"},{default:a(()=>[e(U,{class:"text-end"},{default:a(()=>[e(J,{class:"mr-4",label:"",size:"large",color:"primary"},{default:a(()=>[H("strong",null,_(d.value)+" puntos ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(P,{cols:"12"},{default:a(()=>[e($,{rounded:"0",elevation:"0"},{default:a(()=>[e(q,{density:"compact",title:A.value[1].name},{default:a(()=>[e(R)]),_:1},8,["title"]),e(D,{class:"py-2 border-b",title:"Año(s) de experiencia"},{prepend:a(()=>[e(ee,null,{default:a(()=>[s(_(y.value.length===0?0 .toFixed(2):(parseInt(y.value[0].Score)*parseInt(y.value[0].Amount)).toFixed(2)),1)]),_:1})]),append:a(()=>[e(v,{icon:"",rounded:"lg",variant:"tonal",color:"red",loading:T.value,onClick:E},{default:a(()=>[e(X,null,{default:a(()=>[s("mdi-minus")]),_:1})]),_:1},8,["loading"]),e(v,{icon:"",rounded:"lg",variant:"tonal",color:"blue",loading:O.value,onClick:Q},{default:a(()=>[e(X,null,{default:a(()=>[s("mdi-plus")]),_:1})]),_:1},8,["loading"])]),_:1}),e(D,{class:"border-b py-2"},{default:a(()=>[e(U,{class:"text-end"},{default:a(()=>[e(J,{class:"mr-4",label:"",size:"large",color:"primary"},{default:a(()=>[H("strong",null,_(m.value)+" puntos ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(P,{cols:"12"},{default:a(()=>[e($,{rounded:"0",elevation:"0"},{default:a(()=>[e(q,{density:"compact",title:A.value[2].name},{default:a(()=>[e(R),e(v,{"append-icon":"mdi-plus",onClick:o[1]||(o[1]=l=>I.value=!0),variant:"outlined",rounded:"lg",class:"me-4"},{default:a(()=>[s(" Agregar ")]),_:1})]),_:1},8,["title"]),(h(!0),Z(W,null,oe(f.value,(l,g)=>(h(),j(D,{key:l.Id,class:"border-b py-2"},{prepend:a(()=>[e(ee,null,{default:a(()=>[s(_((parseFloat(l.Score)*parseFloat(l.Amount)).toFixed(2)),1)]),_:2},1024)]),append:a(()=>[e(v,{icon:"",rounded:"lg",variant:"tonal",color:"red",onClick:ye=>Y(l.Id,g,"C"),loading:l.loading},{default:a(()=>[e(X,null,{default:a(()=>[s("mdi-delete")]),_:1})]),_:2},1032,["onClick","loading"])]),default:a(()=>[e(U,null,{default:a(()=>[s(_(l.Observations),1)]),_:2},1024)]),_:2},1024))),128)),e(D,{class:"border-b py-2"},{default:a(()=>[e(U,{class:"text-end"},{default:a(()=>[e(J,{class:"mr-4",label:"",size:"large",color:"primary"},{default:a(()=>[H("strong",null,_(L.value)+" puntos ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(P,{cols:"12"},{default:a(()=>[e($,{rounded:"0",elevation:"0"},{default:a(()=>[e(q,{title:"Calificación Final"},{default:a(()=>[e(R),e(J,{class:"mr-4",label:"",size:"x-large",color:"blue"},{default:a(()=>[H("strong",null,_(V.value)+" puntos ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),e(ie,{modelValue:c.value,"onUpdate:modelValue":o[5]||(o[5]=l=>c.value=l),"max-width":"600"},{default:a(()=>[e(de,{ref:"formAddFA","lazy-validation":"",onSubmit:ne(w,["prevent"])},{default:a(()=>[e($,null,{default:a(()=>[e(se,null,{default:a(()=>[s(" Agregar Formación Académica ")]),_:1}),e(N,null,{default:a(()=>[e(ae,null,{default:a(()=>[e(P,{cols:"12"},{default:a(()=>[e(De,{modelValue:i.value.indicator,"onUpdate:modelValue":o[2]||(o[2]=l=>i.value.indicator=l),label:"Indicador",items:k.value,"item-title":"name","item-value":"id","return-object":!0},null,8,["modelValue","items"])]),_:1}),e(P,{cols:"12"},{default:a(()=>[e(ce,{modelValue:i.value.description,"onUpdate:modelValue":o[3]||(o[3]=l=>i.value.description=l),label:"Descripción"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(re,null,{default:a(()=>[e(R),e(v,{variant:"tonal",color:"error",onClick:o[4]||(o[4]=l=>c.value=!1)},{default:a(()=>[s("Cancelar")]),_:1}),e(v,{color:"primary",variant:"flat",type:"submit",loading:M.value},{default:a(()=>[s("Guardar")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1},8,["modelValue"]),e(ie,{modelValue:I.value,"onUpdate:modelValue":o[8]||(o[8]=l=>I.value=l),"max-width":"600"},{default:a(()=>[e(de,{ref:"FormC",onSubmit:ne(K,["prevent"])},{default:a(()=>[e($,null,{default:a(()=>[e(se,null,{default:a(()=>[s(" Agregar Capacitación ")]),_:1}),e(N,null,{default:a(()=>[e(ae,null,{default:a(()=>[e(P,{cols:"12"},{default:a(()=>[e(ce,{modelValue:C.value.description,"onUpdate:modelValue":o[6]||(o[6]=l=>C.value.description=l),label:"Descripción"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(re,null,{default:a(()=>[e(R),e(v,{color:"error",variant:"tonal",onClick:o[7]||(o[7]=l=>I.value=!1)},{default:a(()=>[s("Cancelar")]),_:1}),e(v,{color:"primary",type:"submit",variant:"flat",loading:F.value},{default:a(()=>[s("Guardar")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1},8,["modelValue"])],64))}}),ge=Symbol.for("vuetify:v-tabs"),qe=me({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Se(Ie({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),Xe=fe()({name:"VTab",props:qe(),setup(t,r){let{slots:i,attrs:x}=r;const{textColorClasses:C,textColorStyles:S}=ke(t,"sliderColor"),d=n(),y=n(),m=te(()=>t.direction==="horizontal"),f=te(()=>{var V,c;return((c=(V=d.value)==null?void 0:V.group)==null?void 0:c.isSelected.value)??!1});function L(V){var M,I;let{value:c}=V;if(c){const F=(I=(M=d.value)==null?void 0:M.$el.parentElement)==null?void 0:I.querySelector(".v-tab--selected .v-tab__slider"),T=y.value;if(!F||!T)return;const O=getComputedStyle(F).color,u=F.getBoundingClientRect(),k=T.getBoundingClientRect(),A=m.value?"x":"y",b=m.value?"X":"Y",G=m.value?"right":"bottom",w=m.value?"width":"height",K=u[A],Q=k[A],E=K>Q?u[G]-k[G]:u[A]-k[A],Y=Math.sign(E)>0?m.value?"right":"bottom":Math.sign(E)<0?m.value?"left":"top":"center",p=(Math.abs(E)+(Math.sign(E)<0?u[w]:k[w]))/Math.max(u[w],k[w])||0,o=u[w]/k[w]||0,l=1.5;we(T,{backgroundColor:[O,"currentcolor"],transform:[`translate${b}(${E}px) scale${b}(${o})`,`translate${b}(${E/l}px) scale${b}(${(p-1)/l+1})`,"none"],transformOrigin:Array(3).fill(Y)},{duration:225,easing:Ee})}}return pe(()=>{const V=v.filterProps(t);return e(v,le({symbol:ge,ref:d,class:["v-tab",t.class],style:t.style,tabindex:f.value?0:-1,role:"tab","aria-selected":String(f.value),active:!1},V,x,{block:t.fixed,maxWidth:t.fixed?300:void 0,"onGroup:selected":L}),{...i,default:()=>{var c;return e(W,null,[((c=i.default)==null?void 0:c.call(i))??t.text,!t.hideSlider&&e("div",{ref:y,class:["v-tab__slider",C.value],style:S.value},null)])}})}),Ae({},d)}});function He(t){return t?t.map(r=>Me(r)?r:{text:r,value:r}):[]}const Je=me({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Le({mandatory:"force"}),...Fe(),...Te()},"VTabs"),oa=fe()({name:"VTabs",props:Je(),emits:{"update:modelValue":t=>!0},setup(t,r){let{slots:i}=r;const x=he(t,"modelValue"),C=te(()=>He(t.items)),{densityClasses:S}=Be(t),{backgroundColorClasses:d,backgroundColorStyles:y}=$e(B(t,"bgColor"));return Pe({VTab:{color:B(t,"color"),direction:B(t,"direction"),stacked:B(t,"stacked"),fixed:B(t,"fixedTabs"),sliderColor:B(t,"sliderColor"),hideSlider:B(t,"hideSlider")}}),pe(()=>{const m=ue.filterProps(t);return e(ue,le(m,{modelValue:x.value,"onUpdate:modelValue":f=>x.value=f,class:["v-tabs",`v-tabs--${t.direction}`,`v-tabs--align-tabs-${t.alignTabs}`,{"v-tabs--fixed-tabs":t.fixedTabs,"v-tabs--grow":t.grow,"v-tabs--stacked":t.stacked},S.value,d.value,t.class],style:[{"--v-tabs-height":ze(t.height)},y.value,t.style],role:"tablist",symbol:ge}),{default:()=>[i.default?i.default():C.value.map(f=>e(Xe,le(f,{key:f.text}),null))]})}),{}}});export{oa as V,la as _,Xe as a,ta as g};
