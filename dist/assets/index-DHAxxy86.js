import{d as b,k as R,p as B,r as n,o as x,i as S,a,w as t,e as T,u as p,f,g as v,b as k,q as P,s as $,F,j as w,c as U}from"./index-DX01y2Bw.js";import{i as q,a as L,b as O,V as M}from"./VForm-CzQwEw30.js";import{P as Y}from"./PostulantService-TtvptJS0.js";import{V,a as j,b as _,e as H,c as J}from"./VCard-fvK9mHqz.js";import{V as X,a as C}from"./VSelect-BPkO-ch9.js";import{V as z}from"./VTextField-BuiSZlrW.js";const G=w("small",null,"Ya inicio la preinscripcion",-1),K=w("p",null,"Ya inicio la preinscripcion,¿ desea continuar?",-1),Q=b({__name:"PostulantVoucher",emits:["onSuccess"],setup(h,{emit:D}){const d=R(),m=B(),i=n(!1),c=new Y,y=n(!1),s=n(!1),r=n(""),I=[{id:"001",name:"DOCUMENTO NACIONAL DE IDENTIDAD",shortName:"DNI"},{id:"003",name:"CARNET/CARNÉ DE EXTRANJERÍA",shortName:"CE"}],g=n(null),l=n({documentType:"001",documentNumber:"",paymentId:"",paymentDate:"",paymentAmount:"",paymentVoucher:null,postulantId:null,fileId:null}),N=async u=>{if(r.value="",u.length===8&&l.value.documentType==="001"){let e=await c.searchPostulantByDocument(l.value.documentType,u);e&&(r.value=e,s.value=!0)}else if(u.length===12&&l.value.documentType==="004"){let e=await c.searchPostulantByDocument(l.value.documentType,u);e&&(r.value=e,s.value=!0)}},E=()=>{let u=m.params.slug;d.push(`/${u}/preinscripcion/${r.value}`)},A=async()=>{const{valid:u}=await g.value.validate();if(u){i.value=!0;try{let e=await c.startPreinscription(l.value);if(e.error){i.value=!1;return}if(l.value.postulantId=e.id,e.id){let o=m.params.slug;d.push(`/${o}/preinscripcion/${l.value.postulantId}`)}}catch{i.value=!1}}};return(u,e)=>(x(),S(F,null,[a(M,{ref_key:"formRef",ref:g,onSubmit:k(A,["prevent"])},{default:t(()=>[a(V,{"max-width":"450",class:"mx-auto my-5",rounded:"lg",elevation:"2"},{default:t(()=>[a(T,null,{default:t(()=>[a(j,{class:"mt-2"},{default:t(()=>[a(_,{cols:"12",md:"12"},{default:t(()=>[a(X,{modelValue:l.value.documentType,"onUpdate:modelValue":[e[0]||(e[0]=o=>l.value.documentType=o),e[1]||(e[1]=o=>N(l.value.documentNumber))],items:I,label:"Tipo de documento","item-title":"shortName","item-value":"id",rules:[p(q)],density:"compact"},null,8,["modelValue","rules"])]),_:1}),a(_,{cols:"12",md:"12",class:"pb-0"},{default:t(()=>[a(z,{modelValue:l.value.documentNumber,"onUpdate:modelValue":[e[2]||(e[2]=o=>l.value.documentNumber=o),N],label:"N° de documento",required:"",rules:[l.value.documentType==="001"?p(L):p(O)],autocomplete:"off",counter:l.value.documentType==="001"?8:12,maxLength:l.value.documentType==="001"?8:12},null,8,["modelValue","rules","counter","maxLength"])]),_:1}),a(_,{cols:"12"},{default:t(()=>[a(f,{type:"submit",variant:"flat",block:"",loading:i.value},{default:t(()=>[v(" Iniciar preinscripción ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512),a(C,{modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=o=>y.value=o)},{default:t(()=>[a(V,{width:"300px",class:"mx-auto"},{default:t(()=>[a(P,{src:"http://www.osce.gob.pe/consultasenlinea/rnp/images/ClaveBANBIF.gif"})]),_:1})]),_:1},8,["modelValue"]),a(C,{modelValue:s.value,"onUpdate:modelValue":e[5]||(e[5]=o=>s.value=o)},{default:t(()=>[a(V,{width:"300px",class:"mx-auto"},{default:t(()=>[a(H,{class:"bg-primary"},{default:t(()=>[G]),_:1}),a(T,null,{default:t(()=>[K]),_:1}),a(J,null,{default:t(()=>[a(f,{color:"red",onClick:e[4]||(e[4]=o=>s.value=!1)},{default:t(()=>[v("No")]),_:1}),a($),a(f,{variant:"tonal",onClick:E},{default:t(()=>[v("Si")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),oe=b({__name:"index",setup(h){return(async()=>{})(),(d,m)=>(x(),U(Q))}});export{oe as default};
